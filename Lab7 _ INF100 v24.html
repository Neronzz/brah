<!DOCTYPE html>
<!-- saved from url=(0097)https://webcache.googleusercontent.com/search?q=cache:https%3A%2F%2Finf100.ii.uib.no%2Flab%2F7%2F -->
<html lang="no" class="h-100"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!--<base href="https://inf100.ii.uib.no/lab/7/">--><base href="."><style>body{margin-left:0;margin-right:0;margin-top:0}#bN015htcoyT__google-cache-hdr{background:#f8f9fa;font:13px Arial,sans-serif;text-align:left;color:var(--COEmY);border:0;margin:0;border-bottom:1px solid var(--gS5jXb);line-height:16px;padding:16px 28px 24px 28px}#bN015htcoyT__google-cache-hdr *{display:inline;font:inherit;text-align:inherit;color:inherit;line-height:inherit;background:none;border:0;margin:0;padding:0;letter-spacing:0}#bN015htcoyT__google-cache-hdr a{text-decoration:none;color:var(--JKqx2);}#bN015htcoyT__google-cache-hdr a:hover{text-decoration:underline}#bN015htcoyT__google-cache-hdr a:visited{color:#681da8}#bN015htcoyT__google-cache-hdr div{display:block;margin-top:4px}#bN015htcoyT__google-cache-hdr b{font-weight:bold;display:inline-block;direction:ltr}</style></head><body class="d-flex flex-column h-100"><div id="bN015htcoyT__google-cache-hdr"><div><span>Dette er bufferen til Google for <a href="https://inf100.ii.uib.no/lab/7/">https://inf100.ii.uib.no/lab/7/</a>.</span>&nbsp;<span>Det er et øyeblikksbilde over siden slik den var 3. aug 2024 23:08:04 GMT.</span>&nbsp;<span><a href="https://inf100.ii.uib.no/lab/7/">Den gjeldende siden</a> kan ha endret seg siden da.</span>&nbsp;<a href="http://support.google.com/websearch/bin/answer.py?hl=no&amp;p=cached&amp;answer=1687222"><span>Les mer</span>.</a></div><div><span style="display:inline-block;margin-top:8px;margin-right:104px;white-space:nowrap"><span style="margin-right:28px"><span style="font-weight:bold">Full versjon</span></span><span style="margin-right:28px"><a href="http://webcache.googleusercontent.com/search?q=cache:https://inf100.ii.uib.no/lab/7/&amp;sca_esv=589f26d910f43319&amp;strip=1&amp;vwsrc=0"><span>Tekstversjon</span></a></span><span style="margin-right:28px"><a href="http://webcache.googleusercontent.com/search?q=cache:https://inf100.ii.uib.no/lab/7/&amp;sca_esv=589f26d910f43319&amp;strip=0&amp;vwsrc=1"><span>Se kilde</span></a></span></span></div><span style="display:inline-block;margin-top:8px;color:var(--IXoxUe)"><span>Tips: For å finne søkeordet ditt raskt på denne siden, trykker du <b>Ctrl+F</b> eller <b>⌘</b> (Mac) og bruker søkeraden.</span></span></div><div style="position:relative;"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="generator" content="Hugo 0.115.1"><meta name="description" content="Når vi lager autotester bruker vi stort sett koden deres som en modul, er ikke det kult? Vi importerer funksjonene som vi ber dere skrive, og derfor blir det feil hvis dere har feil navn på funksjonene eller modulene."><meta http-equiv="refresh" content="14400"><link rel="apple-touch-icon" sizes="180x180" href="https://inf100.ii.uib.no/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://inf100.ii.uib.no/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://inf100.ii.uib.no/favicon-16x16.png"><link rel="manifest" href="https://inf100.ii.uib.no/site.webmanifest"><link rel="stylesheet" href="./Lab7 _ INF100 v24_files/bootstrap.min.css"><link rel="stylesheet" href="./Lab7 _ INF100 v24_files/inf100.css"><link rel="stylesheet" href="./Lab7 _ INF100 v24_files/videotag.css"><link rel="stylesheet" href="./Lab7 _ INF100 v24_files/bootstrap-icons.css"><title>Lab7 | INF100 v24</title><style>.container{max-width:768px}body{background-color:#f0e5f1}#nav a{font-weight:700;color:inherit}#nav a.nav-link-active{background-color:#212529;color:#fff}#nav-border{background-color:#bb2693;color:#f6eff2;margin-top:12px;border-radius:4px 4px 0 0}#nav-border a{color:#f6eff2}#my-content-container{background-color:#f8f4f5;border-radius:0 0 4px 4px}#main{margin-top:1em;margin-bottom:4em}#home-jumbotron{background-color:inherit}#footer .container{padding:1em 0}#footer a{color:inherit;text-decoration:underline}#main h1{text-align:center}.font-125{font-size:125%}.tag-btn{margin-bottom:.3em}pre{background-color:#f2f4f8;border:1px solid #ccc;border-radius:4px;padding:16px}pre code{padding:0;font-size:inherit;color:inherit;background-color:transparent;border-radius:0}code{padding:2px 4px;font-size:90%;color:#0e2237;background-color:#f2f4f8;border-radius:4px}img,iframe,embed,video,audio{max-width:100%}.card-img,.card-img-top,.card-img-bottom{width:initial}.cimg-container{text-align:center}.level-container{border:1px solid #ccc;border-radius:4px;padding:16px;margin-bottom:12px}.level-container.A{background-color:#f2ffe4}.level-container.B{background-color:#f9ffe3}.level-container.C{background-color:#fdffe3}.level-container.D{background-color:#fff7e2}.level-container.E{background-color:#fff1e4}.level-container .level-top{text-align:right;font-size:smaller;color:#0008}.level-container .level-top span{border:1px dashed #0008;padding:.2em .5em;border-radius:4px}</style><div><div id="nav-border" class="navbar container"><div class="container-fluid"><span class="navbar-brand flex-grow-1" style="display:flex;align-items:center"><a href="https://inf100.ii.uib.no/"><img src="./Lab7 _ INF100 v24_files/python-circle-tight.png" style="max-height:2em;margin-right:.5em" alt="INF100 h22 logo"></a>
<a href="https://inf100.ii.uib.no/" style="text-decoration:none"><div style="margin-left:.1em">INF100 v24</div></a></span><nav id="nav" class="nav justify-content-end"><div class="nav-item"><a class="nav-link" href="https://inf100.ii.uib.no/search">Søk</a></div><a class="nav-link" href="https://mitt.uib.no/courses/45616/"><i class="bi bi-box-arrow-up-right"></i> mitt.uib</a></nav></div></div></div><div id="my-content-container" class="container"><main id="main"><h1>Lab7</h1><p></p><blockquote><p>Når vi lager autotester bruker vi stort sett koden deres som en <strong>modul</strong>, er ikke det kult? Vi importerer funksjonene som vi ber dere skrive, og derfor blir det feil hvis dere har feil navn på funksjonene eller modulene.</p></blockquote><p></p><h5>Oppgaver</h5><p>Oppvarming</p><ul><li><a href="https://inf100.ii.uib.no/lab/7/#skuddar_modul">Skuddår-modul</a></li><li><a href="https://inf100.ii.uib.no/lab/7/#polynom">Polynom</a></li><li><a href="https://inf100.ii.uib.no/lab/7/#tilfeldig_bursdag">Tilfeldig bursdag</a></li><li><a href="https://inf100.ii.uib.no/lab/7/#student_registry">Studentregister</a></li></ul><p>Obligatorisk</p><ul><li><a href="https://inf100.ii.uib.no/lab/7/#fredag_13">Fredag 13.</a></li><li><a href="https://inf100.ii.uib.no/lab/7/#earthquakes">Jordskjelv</a></li></ul><p>Valgfri</p><ul><li><a href="https://inf100.ii.uib.no/lab/7/#kombinere_csv-filer">Kombinere CSV-filer</a></li><li><a href="https://inf100.ii.uib.no/lab/7/#pi_med_tilfeldige_tall">Pi med tilfeldige tall</a></li><li><a href="https://inf100.ii.uib.no/lab/7/#terningkast">Terningkast</a></li><li><a href="https://inf100.ii.uib.no/lab/7/#kvittering">Kvittering</a></li><li><a href="https://inf100.ii.uib.no/lab/7/#vrmelding">Værmelding</a></li></ul><h5>Hvordan fullføre laben</h5><p>For å bestå laben, må alle de obligatoriske oppgavene være bestått. Laben leveres i CodeGrade; du finner som vanlig knappen dit på mitt.uib.</p><div style="margin-bottom:40px"></div><hr><div style="margin-bottom:60px"></div><h3>Oppvarming</h3><div class="level-container E"><h5 id="skuddar_modul">Skuddår-modul</h5><div style="display:grid;gap:5px;grid-auto-flow:column;justify-content:right;direction:rtl"><div class="level-top"><span>Oppvarming</span></div><div class="level-top"><span>Nivå E</span></div></div><div style="margin-bottom:25px"></div><blockquote><p>Tips: før du løser denne oppgaven bør du lese kursnotatene om <a href="https://inf100.ii.uib.no/notat/moduler/">moduler</a>, særlig avsnittet om hovedfiler og moduler.</p></blockquote><p>I denne oppgaven skal du lage en modul i filen <em>leapyear.py</em>. Den skal ha en funksjon som forteller hvorvidt et år er et skuddår eller ikke. Modulen du skriver skal <em>både</em> kunne kjøres som et eget program hvor brukeren blir bedt om å oppgi hvilken år hen vil vite mer om, i <em>tillegg</em> til at man skal kunne importere funksjonen <em>is_leap_year</em> til bruk i andre moduler.</p><blockquote><p>Husker du oppgaven om skuddår fra lab2? Her er en repetisjon av reglene:</p><ul><li>Vanligvis er et år som er <em>delelig med 4</em> et skuddår (for eksempel 1996 var et skuddår);</li><li>bortsett fra år som <em>også er delelige med 100</em> (for eksempel 1900 er <em>ikke</em> skuddår);</li><li>men hvis året som er delelige med 100 <em>også er delelig med 400</em>, da er det et skuddår likevel (for eksempel er 2000 et skuddår).</li></ul></blockquote><p><strong>Del A</strong></p><ul><li>I filen <em>leapyear.py</em>, lag en funksjon <em>is_leap_year</em> som tar inn et årstall <code>year</code> og returnerer <code>True</code> hvis året er et skuddår, og <code>False</code> ellers. Ta utgangspunkt i følgende kode du kan kopiere inn i filen din:</li></ul><div class="highlight" copybuttononly="true"><pre tabindex="0" style=";margin-bottom:0.4em;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="display:flex"><span><span style="color:green;font-weight:700">def</span> <span style="color:#00f">is_leap_year</span>(year):
</span></span><span style="display:flex"><span>    <span style="color:#408080;font-style:italic"># TODO: skriv din kode for del A her</span>
</span></span><span style="display:flex"><span>    <span style="color:#408080;font-style:italic"># (har du allerede gjorde oppgaven i lab 2, kan du kopiere derfra)</span>
</span></span><span style="display:flex"><span>    <span style="color:#666">...</span>
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span><span style="color:green;font-weight:700">def</span> <span style="color:#00f">main</span>():
</span></span><span style="display:flex"><span>    <span style="color:#408080;font-style:italic"># TODO: skriv din kode for del B her</span>
</span></span><span style="display:flex"><span>    <span style="color:#666">...</span>
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span><span style="color:green;font-weight:700">if</span> __name__ <span style="color:#666">==</span> <span style="color:#ba2121">"__main__"</span>:
</span></span><span style="display:flex"><span>    <span style="color:#408080;font-style:italic"># Vi kaller main kun hvis *denne* filen kjøres som hovedprogrammet</span>
</span></span><span style="display:flex"><span>    main()
</span></span></code></pre>
        <div style="text-align:right;margin-bottom:.8em">
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="onCopyClicked(this)">
                <i class="bi bi-files"></i> Kopier
            </button>
        </div></div><p>Du kan allerede nå sjekke at det fungerer å bruke programmet ditt som en modul. Last ned scriptet <a href="https://inf100.ii.uib.no/lab/7/skuddar_modul/leapyear_test_A.py" download="">leapyear_test_A.py</a>, legg det i samme mappe som leapyear.py, og kjør det.</p><p><strong>Del B</strong></p><p>I denne delen av oppgaven skal vi gjøre det mulig å kjøre leapyear.py som et program som en sluttbruker kan benytte. Programmet skal:</p><ul><li>be brukeren om å skrive inn et årstall,</li><li>lese inn hva brukeren skriver (inkludert å konvertere til heltall),</li><li>kalle på funksjonen fra del A for å avgjøre om årstallet er et skuddår eller ikke, og til slutt</li><li>skrive ut om året er et skuddår eller ikke til skjermen. Se eksempler under for nøyaktig ordlyd.</li></ul><p>Eksempel på interaksjoner med programmet:</p><pre><code>Skriv inn et årstall:
<span class="user-input">1996</span>
1996 er et skuddår
</code></pre><pre><code>Skriv inn et årstall:
<span class="user-input">1800</span>
1800 er ikke et skuddår
</code></pre><p>Pass på at <em>leapyear_test_A.py</em> fortsatt fungerer!</p><blockquote><p>Relaterte refleksjonsspørsmål vi forventer at du kan svare på under en eventuell eksamen (diskuter gjerne med en venn/en gruppeleder/på discord om du er usikker):</p><ul><li>Hva er hensikten med <code>if __name__ == "__main__":</code>?</li><li>Hva er forskjellen hvis vi fjerner <code>if __name__ == "__main__":</code> og rett og slett bare kaller på <code>main()</code> uansett?</li></ul></blockquote><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjon11322fabfc68dc6b" aria-expanded="false" aria-controls="hintseksjon11322fabfc68dc6b">
<i class="bi bi-lightbulb"></i> Hint</button><p></p><div class="collapse" id="hintseksjon11322fabfc68dc6b"><div class="card card-body"><span class="play-video"><button type="button" class="btn btn-outline-primary btn-sm" style="margin-bottom:.5em" onclick="onPlayVideo(this)" data-src="https://www.youtube.com/embed/IBTusz6mpkU" disabled="">
<i class="bi bi-camera-video"></i>
Løsningsforslag</button></span></div></div><p></p></div><div class="level-container E"><h5 id="polynom">Polynom</h5><div style="display:grid;gap:5px;grid-auto-flow:column;justify-content:right;direction:rtl"><div class="level-top"><span>Oppvarming</span></div><div class="level-top"><span>Nivå E</span></div></div><div style="margin-bottom:25px"></div><blockquote><p>Forberedelser: Gjør <a href="https://matplotlib.org/stable/tutorials/introductory/pyplot.html">tutorial for pyplot</a></p></blockquote><p>I denne oppgaven skal du lage en funksjon som bruker matplotlib til å visualisere en andregradsfunksjon. I filen <em>function_visualiser.py</em> lag en funksjon <em>plot_polynomial</em> som tar inn koeffisientene <code>a</code>, <code>b</code> og <code>c</code> til en andregradsfunksjon, og en samling med tall <code>xs</code> som angir x-verdiene som skal plottes. Funksjonen skal plotte funksjonen for disse x-verdiene med matplotlib. Vi skal også sette navn på aksene og gi plottet en tittel. Aksenavnene kan være “x” og “y”, og tittelen kan være “The function f(x) = ax^2 + bx + c” hvor du setter inn riktige verdier for a, b og c.</p><p>Husk at en andregradsfunksjon er gitt ved formelen: <span><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>a</mi><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>b</mi><mi>x</mi><mo>+</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">f(x) = ax^2 + bx + c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.9474em; vertical-align: -0.0833em;"></span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8641em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord mathnormal">b</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span></span></span></p><p>For å teste funksjonen, legg til dette på slutten av filen (gitt at du har importert matplotlib ved <code>import matplotlib.pyplot as plt</code>):</p><div class="highlight" copybuttononly="true"><pre tabindex="0" style=";margin-bottom:0.4em;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="display:flex"><span><span style="color:green;font-weight:700">import</span> <span style="color:#00f;font-weight:700">matplotlib.pyplot</span> <span style="color:green;font-weight:700">as</span> <span style="color:#00f;font-weight:700">plt</span>
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span><span style="color:green;font-weight:700">def</span> <span style="color:#00f">visualise</span>(a, b, c, xs):
</span></span><span style="display:flex"><span>    <span style="color:#408080;font-style:italic"># TODO: din kode her</span>
</span></span><span style="display:flex"><span>    <span style="color:#666">...</span>
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span><span style="color:green;font-weight:700">if</span> __name__ <span style="color:#666">==</span> <span style="color:#ba2121">"__main__"</span>:
</span></span><span style="display:flex"><span>    visualise(<span style="color:#666">1</span>, <span style="color:#666">-</span><span style="color:#666">5</span>, <span style="color:#666">100</span>, [<span style="color:#666">-</span><span style="color:#666">10</span>, <span style="color:#666">-</span><span style="color:#666">8</span>, <span style="color:#666">-</span><span style="color:#666">6</span>, <span style="color:#666">-</span><span style="color:#666">4</span>, <span style="color:#666">-</span><span style="color:#666">2</span>, <span style="color:#666">0</span>, <span style="color:#666">2</span>, <span style="color:#666">4</span>, <span style="color:#666">6</span>, <span style="color:#666">8</span>, <span style="color:#666">10</span>])
</span></span><span style="display:flex"><span>    plt<span style="color:#666">.</span>show()
</span></span></code></pre>
        <div style="text-align:right;margin-bottom:.8em">
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="onCopyClicked(this)">
                <i class="bi bi-files"></i> Kopier
            </button>
        </div></div><p>Du skal da få en funksjon som ser slik ut om du har gjort det riktig:</p><div class="cimg-container"><img src="./Lab7 _ INF100 v24_files/funksjon.png" alt="image" class="cimg"></div><p></p><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjonbe9286086b0aad77" aria-expanded="false" aria-controls="hintseksjonbe9286086b0aad77">
<i class="bi bi-lightbulb"></i> Tittel på plottet</button><p></p><div class="collapse" id="hintseksjonbe9286086b0aad77"><div class="card card-body"><p>Siden det ser litt rart ut å ha “0x^2” i tittelen når a = 0, eller " + -3x" når b = -3, kan du lage en funksjon som setter riktig fortegn foran konstantene <code>a</code>, <code>b</code> og <code>c</code> i tittelen. Her er forslag til en måte å gjøre det på:</p><div class="highlight"><pre tabindex="0" style=";margin-bottom:0.4em;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="display:flex"><span><span style="color:green;font-weight:700">def</span> <span style="color:#00f">constant_string</span>(constant):
</span></span><span style="display:flex"><span>    <span style="color:green;font-weight:700">if</span> constant <span style="color:#666">==</span> <span style="color:#666">0</span>:
</span></span><span style="display:flex"><span>        <span style="color:green;font-weight:700">return</span> <span style="color:#ba2121">""</span>
</span></span><span style="display:flex"><span>    <span style="color:green;font-weight:700">elif</span> constant <span style="color:#666">&gt;</span> <span style="color:#666">0</span>:
</span></span><span style="display:flex"><span>        <span style="color:green;font-weight:700">return</span> <span style="color:#ba2121">f</span><span style="color:#ba2121">" + </span><span style="color:#b68;font-weight:700">{</span>constant<span style="color:#b68;font-weight:700">}</span><span style="color:#ba2121">"</span>
</span></span><span style="display:flex"><span>    <span style="color:green;font-weight:700">else</span>:
</span></span><span style="display:flex"><span>        <span style="color:green;font-weight:700">return</span> <span style="color:#ba2121">f</span><span style="color:#ba2121">" - </span><span style="color:#b68;font-weight:700">{</span><span style="color:green">abs</span>(constant)<span style="color:#b68;font-weight:700">}</span><span style="color:#ba2121">"</span>
</span></span></code></pre>
        <div style="text-align:right;margin-bottom:.8em">
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="onCopyClicked(this)">
                <i class="bi bi-files"></i> Kopier
            </button>
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="onTraceClicked(this)">
                <i class="bi bi-eye"></i> Se steg
            </button>
            <button type="button" class="runbutton btn btn-outline-primary btn-sm" onclick="onRunClicked(this)" disabled="">
                <i class="bi bi-play-circle"></i> Kjør
            </button>
        </div></div><p>Du får fortsatt 1-ere foran, slik som “1x” og “1x^2”. Vi har latt være å fikse akkurat dette for å holde det enkelt.</p><p>Du kan da bruke f-strengen:</p><div class="highlight"><pre tabindex="0" style="-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="display:flex"><span><span style="color:#ba2121">f</span><span style="color:#ba2121">'The function f(x) = </span><span style="color:#b68;font-weight:700">{</span>constant_string(a)<span style="color:#b68;font-weight:700">}</span><span style="color:#ba2121">x^2 </span><span style="color:#b68;font-weight:700">{</span>constant_string(b)<span style="color:#b68;font-weight:700">}</span><span style="color:#ba2121">x </span><span style="color:#b68;font-weight:700">{</span>constant_string(c)<span style="color:#b68;font-weight:700">}</span><span style="color:#ba2121">'</span>
</span></span></code></pre></div><p>Som tittel på plottet. Prøv å forstå logikken i krøllparantesene, men det er greit om du ikke gjør det. Det er bare en måte å få riktig fortegn på konstantene.</p></div></div><p></p><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjon6520015ba3fbca0a" aria-expanded="false" aria-controls="hintseksjon6520015ba3fbca0a">
<i class="bi bi-lightbulb"></i> Framgangsmåte</button><p></p><div class="collapse" id="hintseksjon6520015ba3fbca0a"><div class="card card-body"><p>I funksjonen <em>plot_function</em> kan du gjøre følgende:</p><ol><li>Regn ut y-verdiene for alle x-verdiene i <code>xs</code> ved å bruke formelen for en andregradsfunksjon.</li><li>Bruk <code>plt.plot(xs, ys)</code> for å plotte funksjonen hvor <code>ys</code> er y-verdiene du regnet ut i steg 1.</li><li>Sett nan</li><li>Bruk <code>plt.title</code> og en f-string for å sette tittel. På grunn av fortegnene blir det litt kluss når du får negative konstanter, så se gjerne på hintet over for å få det til.</li></ol></div></div><p></p></div><div class="level-container E"><h5 id="tilfeldig_bursdag">Tilfeldig bursdag</h5><div style="display:grid;gap:5px;grid-auto-flow:column;justify-content:right;direction:rtl"><div class="level-top"><span>Oppvarming</span></div><div class="level-top"><span>Nivå E</span></div></div><div style="margin-bottom:25px"></div><blockquote><p>På forhånd bør du lese om:</p><ul><li><a href="https://inf100.ii.uib.no/notat/standardbiblioteket/#random">random</a></li><li><a href="https://inf100.ii.uib.no/notat/standardbiblioteket/#datetime">datetime</a></li></ul><p>Det er også nyttig å søke opp eksempelkode for å se hvordan disse bibliotekene brukes.</p></blockquote><p>I denne oppgaven skal du lage en funksjon som finner en tilfeldig bursdag i et år. I filen <em>random_birthday.py</em>, lag en funksjon <em>random_birthday</em> som tar inn et årstall <code>year</code> og returnerer en tilfeldig dato i det året som en streng. Du kan bruke <code>datetime</code> og <code>random</code> for å lage en dato og utføre addisjon slik at du får en tilfeldig dato i det gitte året. For at testene skal fungere, må du bruke random slik at du genererer en dag i et år basert på dager fra 1.januar. For eksempel vil datoen bli 30.januar hvis du legger til 29 dager, eller 1. januar hvis du legger til 0 dager. Du må ta hensyn til skuddår.</p><p>Vi ønsker at datoen skal returneres som en string på formatet <code>dd.mm.yyyy</code>, og til dette kan vi bruke <code>strftime</code> fra <em>datetime</em>. Denne funksjonen gjør et <code>datetime</code>-objekt om til en string, og argumentet spesifiserer formatet. <code>%d</code> gir dag, <code>%m</code> gir måned og <code>%Y</code> gir år.</p><p>Siden vi skal vite hvor mange dager det er i året, må vi ta hensyn til skuddår. Hvis du har gjort oppvarmingsoppgaven Skuddår-modul, kan du importere funksjonen <code>is_leap_year</code> fra der. Hvis ikke, se hintet under.</p><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjon5392d0ce6fb4358c" aria-expanded="false" aria-controls="hintseksjon5392d0ce6fb4358c">
<i class="bi bi-lightbulb"></i> Skuddår</button><p></p><div class="collapse" id="hintseksjon5392d0ce6fb4358c"><div class="card card-body"><div class="highlight"><pre tabindex="0" style=";margin-bottom:0.4em;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="display:flex"><span><span style="color:green;font-weight:700">def</span> <span style="color:#00f">is_leap_year</span>(year):
</span></span><span style="display:flex"><span>    <span style="color:green;font-weight:700">return</span> year <span style="color:#666">%</span> <span style="color:#666">4</span> <span style="color:#666">==</span> <span style="color:#666">0</span> <span style="color:#a2f;font-weight:700">and</span> (year <span style="color:#666">%</span> <span style="color:#666">100</span> <span style="color:#666">!=</span> <span style="color:#666">0</span> <span style="color:#a2f;font-weight:700">or</span> year <span style="color:#666">%</span> <span style="color:#666">400</span> <span style="color:#666">==</span> <span style="color:#666">0</span>)
</span></span></code></pre>
        <div style="text-align:right;margin-bottom:.8em">
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="onCopyClicked(this)">
                <i class="bi bi-files"></i> Kopier
            </button>
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="onTraceClicked(this)">
                <i class="bi bi-eye"></i> Se steg
            </button>
            <button type="button" class="runbutton btn btn-outline-primary btn-sm" onclick="onRunClicked(this)" disabled="">
                <i class="bi bi-play-circle"></i> Kjør
            </button>
        </div></div></div></div><p></p><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjonbc08ef8d3f5f36ab" aria-expanded="false" aria-controls="hintseksjonbc08ef8d3f5f36ab">
<i class="bi bi-lightbulb"></i> Hint</button><p></p><div class="collapse" id="hintseksjonbc08ef8d3f5f36ab"><div class="card card-body"><p>I funksjonen <em>random_birthday</em> kan du gjøre følgende:</p><ol><li>Bruk <em>datetime</em> til å lage et <code>datetime</code>-objekt som representerer 1. januar i <code>year</code>.</li><li>Bruk <code>timedelta</code> og <em>random</em> til å legge til et tilfeldig antall dager til dette objektet.</li><li>Bruk <code>strftime</code> for å returnere datoen som en string.</li></ol></div></div><p></p><p>For å teste funksjonen, legg til dette på slutten av filen (gitt at du har importert datetime og random) og sjekk at du får noen tilfeldige datoer i 2022, 2023 og 1912:</p><div class="highlight" copybuttononly="true"><pre tabindex="0" style=";margin-bottom:0.4em;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="display:flex"><span><span style="color:green;font-weight:700">if</span> __name__ <span style="color:#666">==</span> <span style="color:#ba2121">"__main__"</span>:
</span></span><span style="display:flex"><span>    <span style="color:green">print</span>(random_birthday(<span style="color:#666">2022</span>))
</span></span><span style="display:flex"><span>    <span style="color:green">print</span>(random_birthday(<span style="color:#666">2023</span>))
</span></span><span style="display:flex"><span>    <span style="color:green">print</span>(random_birthday(<span style="color:#666">1912</span>))
</span></span></code></pre>
        <div style="text-align:right;margin-bottom:.8em">
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="onCopyClicked(this)">
                <i class="bi bi-files"></i> Kopier
            </button>
        </div></div><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjon0e970eb8bce9a13b" aria-expanded="false" aria-controls="hintseksjon0e970eb8bce9a13b">
<i class="bi bi-lightbulb"></i> Hint</button><p></p><div class="collapse" id="hintseksjon0e970eb8bce9a13b"><div class="card card-body"><span class="play-video"><button type="button" class="btn btn-outline-primary btn-sm" style="margin-bottom:.5em" onclick="onPlayVideo(this)" data-src="https://www.youtube.com/embed/Uu-ZvYStvPk" disabled="">
<i class="bi bi-camera-video"></i>
Løsningsforslag</button></span></div></div><p></p></div><div class="level-container E"><h5 id="student_registry">Studentregister</h5><div style="display:grid;gap:5px;grid-auto-flow:column;justify-content:right;direction:rtl"><div class="level-top"><span>Oppvarming</span></div><div class="level-top"><span>Nivå E</span></div></div><div style="margin-bottom:25px"></div><p>Du har et register med studentdata i en json-fil. I filen <em>student_registry.py</em> skal du lage en funksjon <em>convert_students_to_csv</em> som tar inn en path til en json-fil med studentdata og en path til en csv-fil, og skriver dataen til csv-filen med csv-format. Bruk komma som separator.</p><a href="https://inf100.ii.uib.no/lab/7/student_registry/data/students.json" download="">students.json</a><p>Åpne filen og se på strukturen. Filen er en dictionary med 1 nøkkel, “students”, som har en liste med dictionaries som verdi. Hver dictionary i listen representerer en student og har nøklene “name”, “area” og “year”. Når du har skrevet dataen til csv-filen, skal den se slik ut:</p><div class="highlight"><pre tabindex="0" style="-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex"><span>id,name,area,year
</span></span><span style="display:flex"><span>1,Alice,Biology,1
</span></span><span style="display:flex"><span>2,Bob,Chemistry,2
</span></span><span style="display:flex"><span>3,Charlie,Physics,4
</span></span></code></pre></div><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjon624681e57386f972" aria-expanded="false" aria-controls="hintseksjon624681e57386f972">
<i class="bi bi-lightbulb"></i> Framgangsmåte</button><p></p><div class="collapse" id="hintseksjon624681e57386f972"><div class="card card-body"><ol><li>Lag en funksjon <em>convert_students_to_csv</em> som tar inn en filsti til en json-fil med studentdata og en filsti til en csv-fil.</li><li>Les inn dataen fra json-filen med <em>json.load</em>.</li><li>Gå gjennom <code>data["students"]</code> med en for-løkke. Da er hvert element i listen en dictionary som representerer en student.</li><li>Hent ut verdiene i de forskjellige nøklene til hver sin liste, slik at du får en liste med navn, en liste med studieretninger og en liste med årstall. Da representerer hver indeks den samme studenten i hver liste.</li><li>Åpne csv-filen og skriv dataen til filen med csv-format.</li></ol></div></div><p></p><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjonb9b73e29f015bb3d" aria-expanded="false" aria-controls="hintseksjonb9b73e29f015bb3d">
<i class="bi bi-lightbulb"></i> Testing</button><p></p><div class="collapse" id="hintseksjonb9b73e29f015bb3d"><div class="card card-body"><p>For å teste funksjonen din, legg til den følgende koden på slutten av filen din og sjekk at csv-filen blir skrevet til disk slik som vist over.</p><div class="highlight"><pre tabindex="0" style=";margin-bottom:0.4em;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="display:flex"><span><span style="color:green;font-weight:700">if</span> __name__ <span style="color:#666">==</span> <span style="color:#ba2121">"__main__"</span>:
</span></span><span style="display:flex"><span>    convert_students_to_csv(<span style="color:#ba2121">"students.json"</span>, <span style="color:#ba2121">"students.csv"</span>)
</span></span></code></pre>
        <div style="text-align:right;margin-bottom:.8em">
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="onCopyClicked(this)">
                <i class="bi bi-files"></i> Kopier
            </button>
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="onTraceClicked(this)">
                <i class="bi bi-eye"></i> Se steg
            </button>
            <button type="button" class="runbutton btn btn-outline-primary btn-sm" onclick="onRunClicked(this)" disabled="">
                <i class="bi bi-play-circle"></i> Kjør
            </button>
        </div></div></div></div><p></p></div><div style="margin-bottom:60px"></div><h3>Obligatorisk</h3><div class="level-container E"><h5 id="fredag_13">Fredag 13.</h5><div style="display:grid;gap:5px;grid-auto-flow:column;justify-content:right;direction:rtl"><div class="level-top"><span>Obligatorisk</span></div><div class="level-top"><span>Nivå E</span></div></div><div style="margin-bottom:25px"></div><p>I filen <em>friday_13th.py</em> skriv en funksjon <code>first_friday_13th_after(date)</code> som har som parameter et <code>datetime</code> -objekt. Funksjonenen returnerer et nytt <code>datetime</code>-objekt, som befinner seg på første fredag den 13. etter den gitte datoen. Dersom input-datoen selv er på en fredag den 13., er det <em>neste</em> datoen som skal returneres.</p><p>Denne oppgaven skal løses ved hjelp av <code>datetime</code> -modulen fra python sitt standardbibliotek.</p><p>Test koden din ved å legge til disse linjene nederst i filen:</p><div class="highlight" copybuttononly="true"><pre tabindex="0" style=";margin-bottom:0.4em;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="display:flex"><span><span style="color:green">print</span>(<span style="color:#ba2121">"Tester first_friday_13th_after... "</span>, end<span style="color:#666">=</span><span style="color:#ba2121">""</span>)
</span></span><span style="display:flex"><span><span style="color:#408080;font-style:italic"># Test 1</span>
</span></span><span style="display:flex"><span>result <span style="color:#666">=</span> first_friday_13th_after(datetime(<span style="color:#666">2022</span>, <span style="color:#666">10</span>, <span style="color:#666">24</span>))
</span></span><span style="display:flex"><span><span style="color:green;font-weight:700">assert</span>((<span style="color:#666">2023</span>, <span style="color:#666">1</span>, <span style="color:#666">13</span>) <span style="color:#666">==</span> (result<span style="color:#666">.</span>year, result<span style="color:#666">.</span>month, result<span style="color:#666">.</span>day))
</span></span><span style="display:flex"><span><span style="color:#408080;font-style:italic"># Test 2</span>
</span></span><span style="display:flex"><span>result <span style="color:#666">=</span> first_friday_13th_after(datetime(<span style="color:#666">2023</span>, <span style="color:#666">1</span>, <span style="color:#666">13</span>))
</span></span><span style="display:flex"><span><span style="color:green;font-weight:700">assert</span>((<span style="color:#666">2023</span>, <span style="color:#666">10</span>, <span style="color:#666">13</span>) <span style="color:#666">==</span> (result<span style="color:#666">.</span>year, result<span style="color:#666">.</span>month, result<span style="color:#666">.</span>day))
</span></span><span style="display:flex"><span><span style="color:#408080;font-style:italic"># Test 3</span>
</span></span><span style="display:flex"><span>result <span style="color:#666">=</span> first_friday_13th_after(datetime(<span style="color:#666">1950</span>, <span style="color:#666">1</span>, <span style="color:#666">1</span>))
</span></span><span style="display:flex"><span><span style="color:green;font-weight:700">assert</span>((<span style="color:#666">1950</span>, <span style="color:#666">1</span>, <span style="color:#666">13</span>) <span style="color:#666">==</span> (result<span style="color:#666">.</span>year, result<span style="color:#666">.</span>month, result<span style="color:#666">.</span>day))
</span></span><span style="display:flex"><span><span style="color:green">print</span>(<span style="color:#ba2121">"OK"</span>)
</span></span></code></pre>
        <div style="text-align:right;margin-bottom:.8em">
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="onCopyClicked(this)">
                <i class="bi bi-files"></i> Kopier
            </button>
        </div></div><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjone2e9db0ee886945c" aria-expanded="false" aria-controls="hintseksjone2e9db0ee886945c">
<i class="bi bi-lightbulb"></i> Hint</button><p></p><div class="collapse" id="hintseksjone2e9db0ee886945c"><div class="card card-body"><ul><li><p>Se eksempel på bruk av datetime på den offisielle dokumentasjonen for <a href="https://docs.python.org/3/library/datetime.html">datetime</a>.</p></li><li><p>Kan være lurt å ha en hjelpefunksjon som sjekker om et gitt tidspunkt er på en fredag den trettende.</p></li><li><p>Forsøk å øke datoen med én dag helt til du treffer en dag som er på en fredag den trettende.</p></li></ul></div></div><p></p></div><div class="level-container B"><h5 id="earthquakes">Jordskjelv</h5><div style="display:grid;gap:5px;grid-auto-flow:column;justify-content:right;direction:rtl"><div class="level-top"><span>Obligatorisk</span></div><div class="level-top"><span>Nivå B</span></div></div><div style="margin-bottom:25px"></div><p>Du har blitt ansatt av et geologisk firma som skal finne ut de minst trygge stedene i verden å bygge boliger. Oppgaven din er å identifisere steder som har hatt store jordskjelv den siste tiden, slik at informasjonen kan selges til ulike boliginvesteringsfirmaer for at de ikke skal bygge boliger der.</p><p>I denne oppgaven skal vi kombinere bruken av hele fem moduler. Tre fra standardbiblioteket (<a href="https://inf100.ii.uib.no/notat/standardbiblioteket/#datetime">datetime</a>, <a href="https://inf100.ii.uib.no/notat/standardbiblioteket/#csv">csv</a>, og <a href="https://inf100.ii.uib.no/notat/standardbiblioteket/#json">json</a>) og to eksterne moduler (<a href="https://inf100.ii.uib.no/notat/eksterne-pakker/#requests-last-ned-ting-fra-internett">requests</a> og <a href="https://inf100.ii.uib.no/notat/eksterne-pakker/#matplotlib-visualisering-av-data">matplotlib</a>).</p><p>Vi skal i denne oppgaven bruke <em>requests</em> til å laste ned data fra en nettside, og så konvertere dataen til en liste av oppslagsverk med <em>csv</em>-biblioteket. Deretter skal vi plotte den med <em>pyplot</em> fra <em>matplotlib</em>. Så skal vi kombinere dette med data fra en annen fil, og plotte begge deler sammen.</p><p>Skriv programmet ditt i filen <code>earthquakes.py</code>.</p><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjone019dc8c720414cc" aria-expanded="false" aria-controls="hintseksjone019dc8c720414cc">
<i class="bi bi-lightbulb"></i> Del A: last ned data om nylige jordskjelv (requests og datetime)</button><p></p><div class="collapse" id="hintseksjone019dc8c720414cc"><div class="card card-body"><h5 id="del-a-last-ned-data-om-nylige-jordskjelv-med-requests-og-datetime">Del A: last ned data om nylige jordskjelv med requests og datetime</h5><p>Nettsiden til <a href="https://www.usgs.gov/">U.S. Geological Survey</a> har åpent tilgjengelig og oppdaterte jordskjelvdata for hele verden. Ta for eksempel denne URL’en:
<a href="https://earthquake.usgs.gov/fdsnws/event/1/query?format=csv&amp;starttime=2024-03-11T17%3A14%3A55%2B0000&amp;endtime=2024-03-21T17%3A14%3A55%2B0000&amp;minmagnitude=5.8&amp;orderby=magnitude&amp;limit=5000"></a><a href="https://earthquake.usgs.gov/fdsnws/event/1/query?format=csv&amp;starttime=2024-03-11T17%3A14%3A55%2B0000&amp;endtime=2024-03-21T17%3A14%3A55%2B0000&amp;minmagnitude=5.8&amp;orderby=magnitude&amp;limit=5000">https://earthquake.usgs.gov/fdsnws/event/1/query?format=csv&amp;starttime=2024-03-11T17%3A14%3A55%2B0000&amp;endtime=2024-03-21T17%3A14%3A55%2B0000&amp;minmagnitude=5.8&amp;orderby=magnitude&amp;limit=5000</a></p><p>Om du får spørsmål om å lagre en fil når du trykker på linken over, bør du lagre den som en .csv-fil; for det er nemlig det du får. Om du åpner filen i en teksteditor (f. eks. VSCode) vil du se at den inneholder jordskjelvdata på .csv -format:</p><div class="highlight"><pre tabindex="0" style="-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text"><span style="display:flex"><span>time,latitude,longitude,depth,mag,magType,nst,gap,dmin,rms,net,id,updated,place,type,horizontalError,depthError,magError,magNst,status,locationSource,magSource
</span></span><span style="display:flex"><span>2024-03-13T15:13:23.771Z,-5.8705,150.6344,50.416,6,mww,112,33,9.887,0.95,us,us6000milg,2024-03-14T15:22:18.952Z,"65 km ESE of Kimbe, Papua New Guinea",earthquake,8.18,4.68,0.044,49,reviewed,us,us
</span></span><span style="display:flex"><span>2024-03-14T21:10:24.838Z,29.8022,-42.6586,10,6,mww,179,57,16.293,0.61,us,us6000miy6,2024-03-18T01:11:06.363Z,"northern Mid-Atlantic Ridge",earthquake,9.76,1.795,0.039,62,reviewed,us,us
</span></span><span style="display:flex"><span>2024-03-16T00:14:52.156Z,-58.9182,158.3605,10,5.9,mww,58,55,4.443,0.51,us,us6000mj77,2024-03-17T19:46:20.040Z,"Macquarie Island region",earthquake,10.98,1.829,0.071,19,reviewed,us,us
</span></span><span style="display:flex"><span>2024-03-13T18:56:13.292Z,-0.1127,125.2136,26.46,5.8,mww,89,67,2.325,1.16,us,us6000minw,2024-03-14T19:00:56.901Z,"106 km SE of Modisi, Indonesia",earthquake,7.48,4.881,0.068,21,reviewed,us,us
</span></span></code></pre></div><p>Vi fikk altså en liste med fire jordskjelv. Men hvilke jordskjelv er det egentlig vi får? For å undersøke det, kan vi undersøke URL’en vi brukte for å laste ned dataen. Vi kan dele opp URL’en i flere deler:</p><ul><li><code>https://earthquake.usgs.gov/fdsnws/event/1/query</code> er basen for URL’en. Dette kaller vi for et «API-endepunkt».</li><li><code>?</code> betyr at resten av URL’en angir «query parametere» og tilhørende argumenter. Symbolet <code>&amp;</code> brukes for å skille mellom ulike parametere.</li><li><code>format=csv</code> spesifiserer at vi ønsker dataen i .csv-format.</li><li><code>starttime=2024-03-11T17%3A14%3A55%2B0000</code> spesifiserer at vi ønsker jordskjelv som finner sted fra og med 11. mars 2024 kl. 17:14:55 UTC. Dette er en måte å skrive tidspunkt på som kalles <em>ISO 8601</em>, men hvor noen symboler har blitt kodet slik at de tryggere kan brukes i en URL (<code>%3A</code> er en kode for symbolet <code>:</code> og <code>%2B</code> er en kode for symbolet <code>+</code>).</li><li><code>endtime=2024-03-21T17%3A14%3A55%2B0000</code> spesifiserer at vi ønsker jordskjelv som finner sted til og med til 21. mars 2024 kl. 17:14:55 UTC.</li><li><code>minmagnitude=5.8</code> er en parameter som spesifiserer at vi ønsker jordskjelv med en styrke på 5.8 eller mer på Richters skala.</li><li><code>orderby=magnitude</code> er en parameter som spesifiserer at vi ønsker jordskjelv sortert etter styrke.</li><li><code>limit=5000</code> er en parameter som spesifiserer at vi ønsker maksimalt 5000 jordskjelv.</li></ul><p>Det var altså fire jordskjelv som skjedde mellom 11. mars og 21. mars 2024 med en styrke på 5.8 eller høyere, og det er dem vi har fått informasjon om i .csv-filen som vi lastet ned.</p><p>For å laste ned data fra internett til et Python-program, bruker vi biblioteket <a href="https://inf100.ii.uib.no/notat/eksterne-pakker/#requests-last-ned-ting-fra-internett">requests</a>.</p><ul><li>Installer <code>requests</code></li><li>Sjekk at du klarer å laste ned dataen fra URL’en over og skrive den ut i konsollen. Du kan bruke programmet under:</li></ul><div class="highlight" copybuttononly="true"><pre tabindex="0" style=";margin-bottom:0.4em;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="display:flex"><span><span style="color:#408080;font-style:italic"># Rask sjekk for at vi har klart å installere requests -biblioteket</span>
</span></span><span style="display:flex"><span><span style="color:green;font-weight:700">import</span> <span style="color:#00f;font-weight:700">requests</span>
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span>url <span style="color:#666">=</span> <span style="color:#ba2121">'https://earthquake.usgs.gov/fdsnws/event/1/query?format=csv&amp;starttime=2024-03-11T17%3A14%3A55%2B0000&amp;endtime=2024-03-21T17%3A14%3A55%2B0000&amp;minmagnitude=5.8&amp;orderby=magnitude&amp;limit=5000'</span>
</span></span><span style="display:flex"><span>headers <span style="color:#666">=</span> {<span style="color:#ba2121">'User-Agent'</span>: <span style="color:#ba2121">'inf100.ii.uib.no mitt_uib_brukernavn'</span>}
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span>response <span style="color:#666">=</span> requests<span style="color:#666">.</span>get(url, headers<span style="color:#666">=</span>headers)
</span></span><span style="display:flex"><span>content <span style="color:#666">=</span> response<span style="color:#666">.</span>content<span style="color:#666">.</span>decode(<span style="color:#ba2121">'utf-8'</span>)
</span></span><span style="display:flex"><span><span style="color:green">print</span>(content)
</span></span><span style="display:flex"><span><span style="color:#408080;font-style:italic"># Sjekk at du ser csv-dataen fra over i terminalen</span>
</span></span></code></pre>
        <div style="text-align:right;margin-bottom:.8em">
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="onCopyClicked(this)">
                <i class="bi bi-files"></i> Kopier
            </button>
        </div></div><p>Når du har fått dette til, er det på tide å gjøre det litt mer dynamisk; for eksempel ønsker vi å kunne hente ut jordskjelvdata basert på datoen når programmet kjøres. Umiddelbart ser det ut som vi må gjøre en seriøs streng-manipulasjon for å konstruere URL’en vi trenger; men heldigvis har requests-modulen gjort det enkelt å generere URL’er med parametere. For eksempel vil koden under gi nøyaktig samme resultat som koden over. Sjekk at du også får samme resultat!</p><div class="highlight" copybuttononly="true"><pre tabindex="0" style=";margin-bottom:0.4em;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="display:flex"><span><span style="color:green;font-weight:700">import</span> <span style="color:#00f;font-weight:700">requests</span>
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span>baseurl <span style="color:#666">=</span> <span style="color:#ba2121">'https://earthquake.usgs.gov/fdsnws/event/1/query'</span>
</span></span><span style="display:flex"><span>headers <span style="color:#666">=</span> {<span style="color:#ba2121">'User-Agent'</span>: <span style="color:#ba2121">'inf100.ii.uib.no mitt_uib_brukernavn'</span>}
</span></span><span style="display:flex"><span>params <span style="color:#666">=</span> {
</span></span><span style="display:flex"><span>    <span style="color:#ba2121">'format'</span>: <span style="color:#ba2121">'csv'</span>,
</span></span><span style="display:flex"><span>    <span style="color:#ba2121">'starttime'</span>: <span style="color:#ba2121">'2024-03-11T17:14:55+0000'</span>, <span style="color:#408080;font-style:italic"># ISO 8601 format</span>
</span></span><span style="display:flex"><span>    <span style="color:#ba2121">'endtime'</span>: <span style="color:#ba2121">'2024-03-21T17:14:55+0000'</span>, <span style="color:#408080;font-style:italic"># ISO 8601 format</span>
</span></span><span style="display:flex"><span>    <span style="color:#ba2121">'minmagnitude'</span>: <span style="color:#666">5.8</span>,
</span></span><span style="display:flex"><span>    <span style="color:#ba2121">'orderby'</span>: <span style="color:#ba2121">'magnitude'</span>,
</span></span><span style="display:flex"><span>    <span style="color:#ba2121">'limit'</span>: <span style="color:#666">5000</span>,
</span></span><span style="display:flex"><span>}
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span>response <span style="color:#666">=</span> requests<span style="color:#666">.</span>get(baseurl, params<span style="color:#666">=</span>params, headers<span style="color:#666">=</span>headers)
</span></span><span style="display:flex"><span>content <span style="color:#666">=</span> response<span style="color:#666">.</span>content<span style="color:#666">.</span>decode(<span style="color:#ba2121">'utf-8'</span>)
</span></span><span style="display:flex"><span><span style="color:green">print</span>(content)
</span></span></code></pre>
        <div style="text-align:right;margin-bottom:.8em">
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="onCopyClicked(this)">
                <i class="bi bi-files"></i> Kopier
            </button>
        </div></div><p>Nå virker det forhåpentligvis litt mer overkommelig å generere URL’er slik vi selv ønsker. Det gjenstår bare å kunne lage en ISO 8601-formatert streng for tidspunktet vi ønsker å hente ut jordskjelvdata for. Til dette formålet bruker vi <a href="https://inf100.ii.uib.no/notat/standardbiblioteket/#datetime">datetime</a>-modulen.</p><ul><li>Opprett et datetime-objekt for sluttidspunktet med tidspunktet «nå» i UTC tid (<code>datetime.now(timezone.utc)</code>).</li><li>Opprett et datetime-objekt for starttidspunktet med tidspunktet 365 dager før sluttidspunktet.</li><li>Konverter til en ISO 8601-formatert streng: <code>my_iso8601_string = my_datetime_object.strftime('%Y-%m-%dT%H:%M:%S%z')</code></li><li>Bruk disse strengene i request’en din for å hente ut jordskjelvdata for det siste året.</li></ul><p>Test at det fungerer. Helt til slutt, skal vi flytte programmet vårt inn i en funksjon, og gjøre det enda mer dynamisk:</p><ul><li><strong>I filen <em>earthquakes.py</em>, skriv en funksjon <code>get_earthquakes_csv_string</code> med to parametre: <code>n</code> et antall dager og <code>magnitude</code> et flyttall. Funksjonen skal returnere en CSV-formatert streng med informasjon hentet fra U.S. Geological Survey om alle jordskjelv som har skjedd de siste <code>n</code> dagene som hadde en styrke på <code>magnitude</code> eller mer. Dersom det er flere enn 5000 slike jordskjelv, skal kun de 5000 sterkeste av dem inkluderes.</strong></li></ul><div class="highlight" copybuttononly="true"><pre tabindex="0" style=";margin-bottom:0.4em;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="display:flex"><span><span style="color:#408080;font-style:italic"># earthquakes.py</span>
</span></span><span style="display:flex"><span><span style="color:green;font-weight:700">import</span> <span style="color:#00f;font-weight:700">requests</span>
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span><span style="color:green;font-weight:700">def</span> <span style="color:#00f">get_earthquakes_csv_string</span>(n, magnitude):
</span></span><span style="display:flex"><span>    <span style="color:#408080;font-style:italic"># Din kode her</span>
</span></span><span style="display:flex"><span>    <span style="color:#666">...</span>
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span><span style="color:green;font-weight:700">if</span> __name__ <span style="color:#666">==</span> <span style="color:#ba2121">"__main__"</span>:
</span></span><span style="display:flex"><span>    s <span style="color:#666">=</span> get_earthquakes_csv_string(<span style="color:#666">30</span>, <span style="color:#666">5.8</span>)
</span></span><span style="display:flex"><span>    <span style="color:green">print</span>(s) <span style="color:#408080;font-style:italic"># vi fjerner print senere, men vi ser nå at vi er på rett vei</span>
</span></span></code></pre>
        <div style="text-align:right;margin-bottom:.8em">
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="onCopyClicked(this)">
                <i class="bi bi-files"></i> Kopier
            </button>
        </div></div></div></div><p></p><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjon21ffedd24bd0c066" aria-expanded="false" aria-controls="hintseksjon21ffedd24bd0c066">
<i class="bi bi-lightbulb"></i> Del B: hent ut relevante jordskjelvdata</button><p></p><div class="collapse" id="hintseksjon21ffedd24bd0c066"><div class="card card-body"><h5 id="del-b-hent-ut-relevante-jordskjelvdata">Del B: hent ut relevante jordskjelvdata</h5><p>Vi har så langt fått tak i jordskjelvene som en csv-formatert streng. Nå er tidspunktet for å konvertere fra en slik streng til en liste med oppslagsverk (eller en 2D-liste, om du foretrekker det). Vi kunne kanskje gjort det selv med <code>split</code> og lignende; men legg merke til at CSV-filen kan inneholde komma også i selve stedsnavnene. Da er det ikke så lett å splitte på komma som vi kanskje skulle ønske. Heldigvis har Python en modul for å lese CSV-filer som håndterer dette for oss: <a href="https://inf100.ii.uib.no/notat/standardbiblioteket/#csv">csv</a> -modulen.</p><ul><li>Bruk csv-modulen for å konvertere csv-strengen til en liste med oppslagsverk. Strengen benytter komma (<code>,</code>) som skilletegn («delimiter») og hermetegn (<code>"</code>) som grupperingssymbol («quotechar»).</li></ul><p>Det vi egentlig ønsker å hente ut fra datasettet er en liste med tupler <code>(lengdegrad, breddegrad, styrke)</code>, slik at vi kan plotte punktene.</p><ul><li><strong>I <em>earthquakes.py</em>, lag en funksjon <code>get_earthquake_list</code> som tar inn en csv-formatert streng <code>csv_string</code> og returnerer en liste med jordskjelv. Hvert jordskjelv skal være en tuple med lengdegrad, breddegrad og styrke som flyttall.</strong></li></ul><p>For å teste funksjonen kan du laste ned og kjøre <a href="https://inf100.ii.uib.no/lab/7/earthquakes/data/test_get_earthquake_list.py" download="">test_get_earthquake_list.py</a>.</p></div></div><p></p><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjona5176c8051fa1d4d" aria-expanded="false" aria-controls="hintseksjona5176c8051fa1d4d">
<i class="bi bi-lightbulb"></i> Del C: plot jordskjelvdata</button><p></p><div class="collapse" id="hintseksjona5176c8051fa1d4d"><div class="card card-body"><h5 id="del-c-plot-jordskjelvdata">Del C: plot jordskjelvdata</h5><p>Nå som vi har fått tak i dataen vi ønsker, skal vi plotte den med <em>pyplot</em> fra det eksterne biblioteket <a href="https://inf100.ii.uib.no/notat/eksterne-pakker/#matplotlib-visualisering-av-data">matplotlib</a>.</p><p>I <em>earthquakes.py</em>, lag en funksjon <em>plot_earthquakes</em> som tar inn en liste med koordinater <code>data_points</code> og plotter dem med <code>plt.scatter</code> som blå prikker. Merk at <code>data_points</code> er en liste med tupler <code>(lengdegrad, breddegrad, styrke)</code>, mens <code>plt.scatter</code> tar inn to lister <code>xs</code> og <code>ys</code> som henholdsvis inneholder x- og y-verdiene til punktene. Du kan bruke en for-løkke for å hente ut x- og y-verdiene fra <code>data_points</code> og legge dem i hver sin liste.</p><p>For å få et bedre inntrykk av hvor jordskjelvene har skjedd, ønsker vi å skalere størrelsen på prikkene etter styrken på jordskjelvet. Dette kan gjøres ved å gi argumentet <code>s</code> til <code>scatter</code>-funksjonen. For å få en synlig størrelsesforskjell, kan du prøve å skalere styrken opphøyd i andre. Dette kan gjøres ved å lage en liste <code>sizes</code> som inneholder styrken opphøyd i andre for hvert jordskjelv, og gi denne listen som argument til <code>s</code> i <code>scatter</code>-funksjonen.</p><p>Vi kan også sette <code>alpha=0.3</code> for å gjøre prikkene litt gjennomsiktige, slik at vi lettere kan se hvor det er flest jordskjelv.</p><p>For å teste at alt henger sammen, går vi til <code>if __name__ == '__main__':</code>-blokken som skal være på slutten av filen. Her kaller du først get_earthquakes_string med styrke 4 og 50 dager som argument. Deretter kaller du parse_earthquakes med resultatet av get_earthquakes_string som argument, og så gir du det resultatet til plot_earthquakes. Så kaller du <code>plt.show()</code> for å vise plottet.</p><p>Når du er ferdig skal programmet produsere noe som ser noenlunde slik ut (dette ble kjørt 19. mars 2024):</p><div class="cimg-container"><img src="./Lab7 _ INF100 v24_files/Earthquakes.png" alt="image" class="cimg"></div><blockquote><p>Men dette er jo bare en haug med prikker? Ja, det er jo allerede litt kult, og om vi legger godviljen til kan vi skimte konturene av noen kontinenter og land. Vi ønsker likevel å gi prikkene litt mer mening og kontekst, og dette skal vi gjøre videre.</p></blockquote><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjonb0e993094075813b" aria-expanded="false" aria-controls="hintseksjonb0e993094075813b">
<i class="bi bi-lightbulb"></i> Hint</button><p></p><div class="collapse" id="hintseksjonb0e993094075813b"><div class="card card-body"><p>I funksjonen <code>plot_earthquakes</code>:</p><ul><li>Gå gjennom <code>datapoints</code> og hent ut x-verdi, y-verdi og styrke for hvert punkt. Legg disse verdiene i hver sin liste, slik at du til slutt ender opp med en liste med x-verdier, en liste med y-verdier, og en liste med styrker. Pass på at styrkene blir opphøyd i andre.</li><li>Gi disse verdiene som argumenter til <code>scatter</code>. Pass på at du må bruke <code>s=</code> for å sette listen av styrker inn som størrelser på prikkene.</li><li>Sett <code>alpha=0.3</code>.</li></ul></div></div><p></p><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjon871a472ccfca490d" aria-expanded="false" aria-controls="hintseksjon871a472ccfca490d">
<i class="bi bi-lightbulb"></i> Feilsøking</button><p></p><div class="collapse" id="hintseksjon871a472ccfca490d"><div class="card card-body"><p>Husk at dersom plottet ser feil ut kan det være feil fra Del B eller Del C. Pass på at du gir <code>xs</code> og <code>ys</code> til <code>plt.scatter</code> i riktig rekkefølge, og at du har hentet ut koordinatene riktig i Del B.</p></div></div><p></p></div></div><p></p><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjoncd29cb7c659fd7fd" aria-expanded="false" aria-controls="hintseksjoncd29cb7c659fd7fd">
<i class="bi bi-lightbulb"></i> Del D: last inn kystlinjer</button><p></p><div class="collapse" id="hintseksjoncd29cb7c659fd7fd"><div class="card card-body"><h5 id="del-d-last-inn-kystlinjer">Del D: last inn kystlinjer</h5><p>Ditt neste oppdrag vil være å finne fram et datasett av verdens kystlinjer, og så hente ut dataen vi har behov for slik vi gjorde for jordskjelvene. Først går du til Martyn Afford sitt prosjekt <a href="https://github.com/martynafford/natural-earth-geojson/tree/master">natural-earth-geojson</a>, og laster ned <em>ne_110m_coastline.json</em> fra mappen <code>/110m/physical</code>. Du må klikke på «download raw file» oppe til høyre når du får opp kartet.</p><p>Det du har lastet ned nå, er en tekst-fil som inneholder koordinater for hele verdens kystlinjer. Dette er en JSON-fil, som er en måte å lagre data på som er veldig likt Python sine oppslagsverk. En forenklet versjon av filen ser slik ut, hvis vi legger til litt ekstra mellomrom og linjeskift for å gjøre det lettere å lese:</p><div class="highlight"><pre tabindex="0" style="-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="display:flex"><span>{
</span></span><span style="display:flex"><span>  <span style="color:green;font-weight:700">"type"</span>: <span style="color:#ba2121">"FeatureCollection"</span>,
</span></span><span style="display:flex"><span>  <span style="color:green;font-weight:700">"features"</span>: [
</span></span><span style="display:flex"><span>    {
</span></span><span style="display:flex"><span>      <span style="color:green;font-weight:700">"type"</span>: <span style="color:#ba2121">"Feature"</span>,
</span></span><span style="display:flex"><span>      <span style="color:green;font-weight:700">"properties"</span>: {
</span></span><span style="display:flex"><span>        <span style="color:green;font-weight:700">"scalerank"</span>: <span style="color:#666">1</span>,
</span></span><span style="display:flex"><span>        <span style="color:green;font-weight:700">"featurecla"</span>: <span style="color:#ba2121">"Coastline"</span>,
</span></span><span style="display:flex"><span>        <span style="color:green;font-weight:700">"min_zooom"</span>: <span style="color:#666">1.0</span>
</span></span><span style="display:flex"><span>      },
</span></span><span style="display:flex"><span>      <span style="color:green;font-weight:700">"geometry"</span>: {
</span></span><span style="display:flex"><span>        <span style="color:green;font-weight:700">"type"</span>: <span style="color:#ba2121">"LineString"</span>,
</span></span><span style="display:flex"><span>        <span style="color:green;font-weight:700">"coordinates"</span>: [
</span></span><span style="display:flex"><span>          [ <span style="color:#666">-163.71289567772871</span>, <span style="color:#666">-78.595667413241543</span> ],
</span></span><span style="display:flex"><span>          [ <span style="color:#666">-159.482404548154477</span>, <span style="color:#666">-79.046337579258974</span> ],
</span></span><span style="display:flex"><span>          [ <span style="color:#666">-163.027407803377002</span>, <span style="color:#666">-78.928773695794959</span> ]
</span></span><span style="display:flex"><span>        ]
</span></span><span style="display:flex"><span>      }
</span></span><span style="display:flex"><span>    },
</span></span><span style="display:flex"><span>    {
</span></span><span style="display:flex"><span>      <span style="color:green;font-weight:700">"type"</span>: <span style="color:#ba2121">"Feature"</span>,
</span></span><span style="display:flex"><span>      <span style="color:green;font-weight:700">"properties"</span>: {
</span></span><span style="display:flex"><span>        <span style="color:green;font-weight:700">"scalerank"</span>: <span style="color:#666">0</span>,
</span></span><span style="display:flex"><span>        <span style="color:green;font-weight:700">"featurecla"</span>: <span style="color:#ba2121">"Coastline"</span>,
</span></span><span style="display:flex"><span>        <span style="color:green;font-weight:700">"min_zooom"</span>: <span style="color:#666">0.0</span>
</span></span><span style="display:flex"><span>      },
</span></span><span style="display:flex"><span>      <span style="color:green;font-weight:700">"geometry"</span>: {
</span></span><span style="display:flex"><span>        <span style="color:green;font-weight:700">"type"</span>: <span style="color:#ba2121">"LineString"</span>,
</span></span><span style="display:flex"><span>        <span style="color:green;font-weight:700">"coordinates"</span>: [
</span></span><span style="display:flex"><span>          [ <span style="color:#666">-6.197884894220991</span>, <span style="color:#666">53.867565009163364</span> ],
</span></span><span style="display:flex"><span>          [ <span style="color:#666">-9.977085740590269</span>, <span style="color:#666">51.820454820353078</span> ],
</span></span><span style="display:flex"><span>          [ <span style="color:#666">-7.572167934591064</span>, <span style="color:#666">55.131622219454869</span> ]
</span></span><span style="display:flex"><span>        ]
</span></span><span style="display:flex"><span>      }
</span></span><span style="display:flex"><span>    },
</span></span><span style="display:flex"><span>  ]
</span></span><span style="display:flex"><span>}
</span></span></code></pre></div><p>Om vi tolker data’en som om det var Python-kode, ser vi at den er organisert som et stort oppslagsverk som inneholder lister og andre oppslagsverk. Det er en nøkkel <code>"features"</code> hvor tilhørende verdi er en liste; hvert element i denne listen er én øy (eller verdensdel). Hver slik øy er igjen representert som et oppslagsverk, og har en nøkkel <code>"geometry"</code> hvor verdien igjen er et oppslagsverk som inneholder en nøkkel <code>"coordinates"</code> som inneholder en liste med koordinater. Dette er en liste med punkter som danner en kystlinje.</p><blockquote><p>Anta at <code>data</code> er en variabel som inneholder oppslagsverket vist over. Da kan vi hente ut de første koordinatene til den første øyen slik:</p><div class="highlight" runbuttons="false"><pre tabindex="0" style="-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="display:flex"><span><span style="color:#666">&gt;&gt;&gt;</span> data[<span style="color:#ba2121">'features'</span>][<span style="color:#666">0</span>][<span style="color:#ba2121">'geometry'</span>][<span style="color:#ba2121">'coordinates'</span>][<span style="color:#666">0</span>]
</span></span><span style="display:flex"><span>[<span style="color:#666">-</span><span style="color:#666">163.71289567772871</span>, <span style="color:#666">-</span><span style="color:#666">78.595667413241543</span>]
</span></span></code></pre></div><p>Vi kan tolke oppslaget som at vi først åpner «features», så velger vi det første øyen i listen, så åpner vi «geometry» for nevnte øy, så «coordinates», og så henter vi ut det første punktet i listen.</p></blockquote><p><a href="https://inf100.ii.uib.no/notat/standardbiblioteket/#json">json</a>-modulen fra standardbiblioteket kan brukes for å konvertere en json-streng til et oppslagsverk.</p><p>I en funksjon <em>load_coastlines</em>, skal du</p><ul><li>lese inn dataen fra <em>ne_110m_coastline.json</em> som en streng, og</li><li>bruke <a href="https://inf100.ii.uib.no/notat/standardbiblioteket/#json">json</a>-modulen fra standardbiblioteket for å konvertere strengen til et oppslagsverk, og</li><li>returnere en liste med alle øyer. Hver øy skal være representert kun som en liste med koordinater.</li></ul><p>Hvis den forenklede JSON-filen over var hele filen, ville altså funksjonen returnert en liste som så slik ut:</p><div class="highlight" runbuttons="false"><pre tabindex="0" style="-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="display:flex"><span>[ 
</span></span><span style="display:flex"><span>  [ <span style="color:#408080;font-style:italic"># Første øy</span>
</span></span><span style="display:flex"><span>    [ <span style="color:#666">-</span><span style="color:#666">163.71289567772871</span>, <span style="color:#666">-</span><span style="color:#666">78.595667413241543</span> ],
</span></span><span style="display:flex"><span>    [ <span style="color:#666">-</span><span style="color:#666">159.482404548154477</span>, <span style="color:#666">-</span><span style="color:#666">79.046337579258974</span> ],
</span></span><span style="display:flex"><span>    [ <span style="color:#666">-</span><span style="color:#666">163.027407803377002</span>, <span style="color:#666">-</span><span style="color:#666">78.928773695794959</span> ]
</span></span><span style="display:flex"><span>  ],
</span></span><span style="display:flex"><span>  [ <span style="color:#408080;font-style:italic"># Andre øy</span>
</span></span><span style="display:flex"><span>    [ <span style="color:#666">-</span><span style="color:#666">6.197884894220991</span>, <span style="color:#666">53.867565009163364</span> ],
</span></span><span style="display:flex"><span>    [ <span style="color:#666">-</span><span style="color:#666">9.977085740590269</span>, <span style="color:#666">51.820454820353078</span> ],
</span></span><span style="display:flex"><span>    [ <span style="color:#666">-</span><span style="color:#666">7.572167934591064</span>, <span style="color:#666">55.131622219454869</span> ]
</span></span><span style="display:flex"><span>  ]
</span></span><span style="display:flex"><span>]
</span></span></code></pre></div><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjone1979f96f42a7753" aria-expanded="false" aria-controls="hintseksjone1979f96f42a7753">
<i class="bi bi-lightbulb"></i> Hint</button><p></p><div class="collapse" id="hintseksjone1979f96f42a7753"><div class="card card-body"><ul><li>Les filen og konverter den til et oppslagsverk med json.</li><li>Opprett en tom liste <code>lines</code> som du skal legge linjene (listene av koordinater) i.</li><li>Den øverste nøkkelen i oppslagsverket er <code>"features"</code>. Dette er en liste med kystlinjer.</li><li>Iterer over kystlinjene (bruk en for-løkke <code>for island in data['features']</code>) og hent ut kystlinjene som <code>island['geometry']['coordinates']</code>. Legg disse linjene til i <code>lines</code>.</li></ul></div></div><p></p></div></div><p></p><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjon91c01d412f19b9f6" aria-expanded="false" aria-controls="hintseksjon91c01d412f19b9f6">
<i class="bi bi-lightbulb"></i> Del E: plot kystlinjer</button><p></p><div class="collapse" id="hintseksjon91c01d412f19b9f6"><div class="card card-body"><h5 id="del-e-plot-kystlinjer">Del E: plot kystlinjer</h5><p>Nå som vi har hentet ut kystlinjene, skal vi plotte dem sammen med jordskjelvdataen. I <em>earthquakes.py</em>, lag en ny funksjon <em>plot_coastlines</em> som tar inn en liste med linjer <code>lines</code> og plotter dem som en linjer med pyplot sin <code>plot</code>-funksjon. Bruk en løkke over linjene for å plotte dem en etter en. Det er ikke så pass mange at det blir en treig løsning slik som i Del C. For å få det til å se ut som eksempelet, må du huske å sette <code>color='grey'</code> som argument til <code>plot</code>-funksjonen. Fargen er ikke et krav, og du får en kul overraskelse om du fjerner <code>color</code>-argumentet.</p><p>For å teste funksjonen, kan du legge følgende til i <code>if __name__ == '__main__'</code> -blokken, før kallet til plt.show:</p><ul><li>Et kall til <em>load_coastlines</em> for å laste inn kystlinjene.</li><li>Et kall til <em>plot_coastlines</em> med resultatet fra foregående kall som argument for å plotte kystlinjene.</li></ul><p>Når du er ferdig skal programmet produsere noe som ser noenlunde slik ut (hvis du kommenterer bort kallet til <code>plot_earthquakes</code>):</p><div class="cimg-container"><img src="./Lab7 _ INF100 v24_files/Coastlines.png" alt="image" class="cimg"></div><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjon83f05c6ea2a59523" aria-expanded="false" aria-controls="hintseksjon83f05c6ea2a59523">
<i class="bi bi-lightbulb"></i> Hint</button><p></p><div class="collapse" id="hintseksjon83f05c6ea2a59523"><div class="card card-body"><p>I funksjonen <code>plot_coastlines</code> kan du iterere over <code>lines</code> og hente ut x- og y-verdier for hver linje på samme måte som vi gjorde i del C. Plot linjene med <code>plt.plot</code> for å lage et linjeplot. Bruk <code>color='grey'</code> for å få linjene grå, eller fjern argumentet for en kul overraskelse.</p></div></div><p></p><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjon27adbe1d32912e4b" aria-expanded="false" aria-controls="hintseksjon27adbe1d32912e4b">
<i class="bi bi-lightbulb"></i> Feilsøking</button><p></p><div class="collapse" id="hintseksjon27adbe1d32912e4b"><div class="card card-body"><p>Husk at dersom plottet ser feil ut kan det være feil fra Del D eller Del E. Pass på at du gir <code>xs</code> og <code>ys</code> til <code>plt.plot</code> i riktig rekkefølge, og at du har hentet ut koordinatene riktig i Del D.</p></div></div><p></p></div></div><p></p><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjonf1ce2c7859cc4cb8" aria-expanded="false" aria-controls="hintseksjonf1ce2c7859cc4cb8">
<i class="bi bi-lightbulb"></i> Del F: plot jordskjelvdata og kystlinjer sammen</button><p></p><div class="collapse" id="hintseksjonf1ce2c7859cc4cb8"><div class="card card-body"><h5 id="del-f-plot-jordskjelvdata-og-kystlinjer-sammen">Del F: plot jordskjelvdata og kystlinjer sammen</h5><p>Nå har vi laget alt vi trenger for å plotte jordskjelv og kystlinjer sammen. Vi skal gjøre dette i <code>if __name__ == '__main__'</code>-biten som vi har brukt så langt. Kommenter inn igjen <code>plot_earthquakes</code>-kallet. Før du har kalt på funksjonene som plotter kystlinjer og jordskjelv, bruk <code>plt.figure(figsize=(12,8))</code> for å lage en ny figur med størrelse 12x8. Dette er for å få et bedre perspektiv på jordskjelvene i forhold til kystlinjene. Legg også til et rutenett. Husk at <code>plt.show()</code> skal kalles etter alt annet for å vise plottet.</p><p>Når programmet ditt produserer noe tilsvarende dette, så er du i mål!</p><div class="cimg-container"><img src="./Lab7 _ INF100 v24_files/Earthquakes_and_coastlines.png" alt="image" class="cimg"></div><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjon09e3c1707c9dce70" aria-expanded="false" aria-controls="hintseksjon09e3c1707c9dce70">
<i class="bi bi-lightbulb"></i> Framgangsmåte</button><p></p><div class="collapse" id="hintseksjon09e3c1707c9dce70"><div class="card card-body"><ul><li>Opprett en ny figur med <code>plt.figure</code> og størrelse <code>figsize=(10,6)</code>.</li><li>Bruk funksjonene fra del A/B og D til å hente ut jordskjelvdata og kystlinjer.</li><li>Plot jordskjelvdata og kystlinjer ved å bruke funksjonene fra del B og D med dataen over.</li><li>Sett tittel på plottet med <code>plt.title</code>.</li><li>Legg til et rutenett med <code>plt.grid(True)</code>.</li><li>Kall <code>plt.show()</code> for å vise plottet.</li></ul></div></div><p></p></div></div><p></p></div><div style="margin-bottom:60px"></div><h3>Valgfri</h3><div class="level-container C"><h5 id="kombinere_csv-filer">Kombinere CSV-filer</h5><div style="display:grid;gap:5px;grid-auto-flow:column;justify-content:right;direction:rtl"><div class="level-top"><span>Valgfri</span></div><div class="level-top"><span>Nivå C</span></div></div><div style="margin-bottom:25px"></div><blockquote><p>I denne oppgaven skal vi bruke CSV- biblioteket til å håndtere CSV-filer. Derfor bør du lese om dette i <a href="https://inf100.ii.uib.no/notat/standardbiblioteket/#csv">kursnotatene om csv</a></p></blockquote><p>I denne oppgaven skal vi kombinere flere CSV-filer som ligger i en mappe til én stor CSV-fil. Hver av CSV-filene har det samme formatet, som også er det formatet den kombinerte CSV-filen skal ha:</p><div class="highlight"><pre tabindex="0" style="-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text"><span style="display:flex"><span>uibid,karakter,kommentar
</span></span><span style="display:flex"><span>abc101,A,"Veldig bra, fra start til slutt"
</span></span><span style="display:flex"><span>abc102,B,"Denne kandidaten kan sin INF100, men bommer litt i oppgave 2 og 3"
</span></span><span style="display:flex"><span>abc103,C,"Denne kandidaten valgte å kun svare på partallsoppgavene"
</span></span></code></pre></div><p>I <em>csv_combiner.py</em> skriv en funksjon <code>combine_csv_in_dir(dirpath, result_path)</code> som har to parametre:</p><ul><li><code>dirpath</code> er en sti til en mappe som inneholder en rekke CSV-filer som skal kombineres. Det er kun filene som slutter på .csv i mappen som skal inkluderes, andre filtyper skal vi overse.</li><li><code>result_path</code> er en sti til en CSV-fil som skal opprettes, som inneholder de kombinerte dataene fra alle CSV-filene.</li></ul><p>For å teste funksjonen kan du laste ned <a href="https://inf100.ii.uib.no/lab/7/kombinere_csv-filer/data/samples.zip" download="">samples.zip</a> og pakke ut innholdet i samme mappe hvor du også finner <em>csv_combiner.py</em>. Innholdet skal ligge i en mappe som heter <em>samples</em>. Du kan så teste funksjonen din med denne koden:</p><div class="highlight" copybuttononly="true"><pre tabindex="0" style=";margin-bottom:0.4em;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="display:flex"><span><span style="color:green">print</span>(<span style="color:#ba2121">"Tester combine_csv_in_dir... "</span>, end<span style="color:#666">=</span><span style="color:#ba2121">""</span>)
</span></span><span style="display:flex"><span><span style="color:#408080;font-style:italic"># Mappen samples må ligge i samme mappe som denne filen</span>
</span></span><span style="display:flex"><span>dirpath <span style="color:#666">=</span> os<span style="color:#666">.</span>path<span style="color:#666">.</span>join(os<span style="color:#666">.</span>path<span style="color:#666">.</span>dirname(__file__), <span style="color:#ba2121">"samples"</span>)
</span></span><span style="display:flex"><span>combine_csv_in_dir(dirpath, <span style="color:#ba2121">"combined_table.csv"</span>)
</span></span><span style="display:flex"><span><span style="color:green;font-weight:700">with</span> <span style="color:green">open</span>(<span style="color:#ba2121">"combined_table.csv"</span>, <span style="color:#ba2121">"rt"</span>, encoding<span style="color:#666">=</span><span style="color:#ba2121">'utf-8'</span>) <span style="color:green;font-weight:700">as</span> f:
</span></span><span style="display:flex"><span>   content <span style="color:#666">=</span> f<span style="color:#666">.</span>read()
</span></span><span style="display:flex"><span>   <span style="color:green;font-weight:700">assert</span>(<span style="color:#ba2121">"""</span><span style="color:#b62;font-weight:700">\
</span></span></span><span style="display:flex"><span><span style="color:#b62;font-weight:700"></span><span style="color:#ba2121">uibid,karakter,kommentar
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">abc104,C,hei
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">abc105,D,"med komma, her er jeg"
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">abc106,E,tittit
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">abc101,A,Her er min kommentar
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">abc102,B,"Jeg er glad, men her er komma"
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">abc103,C,Katching
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">"""</span> <span style="color:#666">==</span> content <span style="color:#a2f;font-weight:700">or</span> <span style="color:#ba2121">"""</span><span style="color:#b62;font-weight:700">\
</span></span></span><span style="display:flex"><span><span style="color:#b62;font-weight:700"></span><span style="color:#ba2121">uibid,karakter,kommentar
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">abc101,A,Her er min kommentar
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">abc102,B,"Jeg er glad, men her er komma"
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">abc103,C,Katching
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">abc104,C,hei
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">abc105,D,"med komma, her er jeg"
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">abc106,E,tittit
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">"""</span> <span style="color:#666">==</span> content)
</span></span><span style="display:flex"><span><span style="color:green">print</span>(<span style="color:#ba2121">"OK"</span>)
</span></span></code></pre>
        <div style="text-align:right;margin-bottom:.8em">
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="onCopyClicked(this)">
                <i class="bi bi-files"></i> Kopier
            </button>
        </div></div><p>Merk: <code>csv</code>-biblioteket sin standard oppførsel når du lagrer 2D-lister som CSV er at det kun benyttes hermetegn dersom det er nødvendig. Det er nødvendig med hermetegn dersom en celle inneholder skilletegn (komma), linjeskift eller hermetegn. Dersom cellen ikke inneholder noen av de tre tegnene, vil det ikke inkluderes hermetegn i filen. Denne oppførselen kan endres ved å kalle på <code>write_csv_file</code> -funksjonen i kursnotatene med argumentene <code>quoting=csv.QUOTE_NONNUMERIC</code> eller <code>quoting=csv.QUOTE_ALL</code> (se også <a href="https://docs.python.org/3/library/csv.html#csv.QUOTE_ALL">offisiell dokumentasjon</a>).</p><p>Dette betyr at selv om det kanskje er hermetegn i input-filen, vil disse ikke nødvendigvis bli med i resultat-filen. Assert-setningene over viser resultatet slik det blir med standard-innstillingene til csv-biblioteket.</p><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjon3dac2a59c5064950" aria-expanded="false" aria-controls="hintseksjon3dac2a59c5064950">
<i class="bi bi-lightbulb"></i> Hint</button><p></p><div class="collapse" id="hintseksjon3dac2a59c5064950"><div class="card card-body"><ul><li><p>CSV-filene i dette eksempelet er best lest med csv-biblioteket. Det blir fort komplisert å tolke dem selv, siden det kan være komma-tegn i kommentar-feltet.</p></li><li><p>Les om <code>os</code> -modulen, og legg spesielt merke til <code>os.walk</code> -funksjonen.</p></li><li><p>Bruk gjerne en hjelpefunksjon <code>merge_table_into(master_table, new_table)</code> som tar som input en 2D-liste <code>master_table</code> som skal muteres, og en 2D-liste <code>new_table</code> som inneholder det nye innholdet som skal legges til. For hver rad i new_table (bortsett fra første rad), kopier raden inn i master_table.</p></li></ul><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjon2c9adb07046298df" aria-expanded="false" aria-controls="hintseksjon2c9adb07046298df">
<i class="bi bi-lightbulb"></i> Mer detaljerte hint</button><p></p><div class="collapse" id="hintseksjon2c9adb07046298df"><div class="card card-body"><ul><li><p>Opprett først en 2D-liste for resultat-tabellen vår, som initielt inneholder én rad (overskriftene). På slutten skal vi konvertere denne listen til CSV.</p></li><li><p>Bruk <code>os.walk</code> eller <code>os.listdir</code> for å gå igjennom alle filene i mappen gitt ved <code>dirpath</code> (os.walk vil også gå inn i undermapper, og du trenger en nøstet løkke inne i os.walk for å gå gjennom listen med filer; ellers fungerer de nokså likt). For hver fil som ender på .csv (bruk f. eks. <code>.endswith</code> -metoden på strenger), åpne filen og les innholdet.</p></li><li><p>Husk å bruke <code>os.path.join</code> -funksjonen for å omgjøre filnavn til filstier.</p></li><li><p>For hver .csv -fil du finner, omgjør den til en 2D-liste, og legg til radene i resultat-tabellen (bruk hjelpefunksjonen beskrevet over).</p></li></ul></div></div><p></p></div></div><p></p></div><div class="level-container D"><h5 id="pi_med_tilfeldige_tall">Pi med tilfeldige tall</h5><div style="display:grid;gap:5px;grid-auto-flow:column;justify-content:right;direction:rtl"><div class="level-top"><span>Valgfri</span></div><div class="level-top"><span>Nivå D</span></div></div><div style="margin-bottom:25px"></div><p>I denne oppgaven skal vi bruke modulen <code>random</code> fra python sitt standardbibliotek for å beregne verdien av <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">π</span></span></span></span></span>. Selvfølgelig finnes en tilnærming for denne verdien allerede (f. eks. <code>math.pi</code>), men la oss forestille oss at vi nå ikke hadde denne beregningen fra før.</p><blockquote><p>Den beste tilnærmingen vi har til π i skrivende stund inneholder over <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>12</mn></msup></mrow><annotation encoding="application/x-tex">10^{12}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span></span></span></span></span></span></span></span></span> siffer. I python er tilnærmingen av gitt ved <code>math.pi</code> begrenset til de første 15 siffrene av pi, men det finnes også andre moduler som gir en bedre tilnærming; men da må vi slutte å bruke <code>float</code>, og heller bruke en annen datatype som er i stand til å gi oss høyere presisjon.</p></blockquote><p><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">π</span></span></span></span></span> er definert som en sirkels omkrets delt på sin diameter. Uten å vite nøyaktig hvilken verdi π har, kan matematikere bevise at denne verdien, om vi en vakker dag skulle få vite hva den er, kan brukes for å regne ut en sirkel sitt areal:</p><p><span><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>A</mi><mo>=</mo><mi>π</mi><mo>⋅</mo><msup><mi>r</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex"> A = \pi \cdot r^2 </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.4445em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">π</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.8641em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8641em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></span></p><p>I formelen over er <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span> sirkelens radius.</p><p>Tenk deg nå at vi har en sirkel med sentrum i (0, 0) og radius <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">r = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>. Vi har også et kvadrat med sidelengde <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">s = 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">2</span></span></span></span></span>, som går mellom punktene (-1, -1) og (1, 1), som illustrert i bildet under.</p><table><thead><tr><th style="text-align:center"></th></tr></thead><tbody><tr><td style="text-align:center"><div class="cimg-container"><img src="./Lab7 _ INF100 v24_files/pi_part1.drawio.svg" alt="Illustrasjon av sirkel i rektangel" class="cimg"></div></td></tr><tr><td style="text-align:center">Vi legger verdiene for r og s inn i formelene for areal av henholdsvis sirkler og kvadrat, og får følgende:</td></tr></tbody></table><p><span><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>A</mi><mo lspace="0em" rspace="0em">◯</mo></msub><mo>=</mo><mi>π</mi><mo>⋅</mo><msup><mi>r</mi><mn>2</mn></msup><mo>=</mo><mi>π</mi><mo>⋅</mo><msup><mn>1</mn><mn>2</mn></msup><mo>=</mo><mi>π</mi></mrow><annotation encoding="application/x-tex">A_{\bigcirc} = \pi \cdot r^2 = \pi \cdot 1^2 = \pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.9694em; vertical-align: -0.2861em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">◯</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.4445em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">π</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.8641em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8641em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.4445em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">π</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.8641em;"></span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8641em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">π</span></span></span></span></span></span>
<span><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>A</mi><mi mathvariant="normal">□</mi></msub><mo>=</mo><msup><mi>s</mi><mn>2</mn></msup><mo>=</mo><msup><mn>2</mn><mn>2</mn></msup><mo>=</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">A_{\square} = s^2 = 2^2 = 4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3225em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord amsrm mtight">□</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8641em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8641em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8641em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8641em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">4</span></span></span></span></span></span></p><p>Siden arealet av sirkelen tydelig er mindre enn arealet av kvadratet, vet vi allerede nå at π må være mindre enn 4. Men vi kan gjøre en bedre tilnærming enn som så.</p><p>Dersom vi velger et helt tilfeldig punkt inne i kvadratet, vil punktet med viss sannsynlighet <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span></span> havne inne i sirkelen. Merk at denne sannsynligheten <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span></span> er gitt ved forholdet mellom arealet av sirkelen og kvadratet:</p><p><span><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>p</mi><mo>=</mo><mfrac><msub><mi>A</mi><mo lspace="0em" rspace="0em">◯</mo></msub><msub><mi>A</mi><mi mathvariant="normal">□</mi></msub></mfrac><mo>=</mo><mfrac><mi>π</mi><mn>4</mn></mfrac></mrow><annotation encoding="application/x-tex"> p = \frac{A_{\bigcirc}}{A_{\square}} = \frac{\pi}{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 2.1963em; vertical-align: -0.836em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.3603em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3225em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord amsrm mtight">□</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">◯</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.836em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.7936em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.1076em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">4</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">π</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p><p>Det følger at hvis vi klarer å beregne hva <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span></span> er for noe, kan vi bare gange tallet med 4 for å finne <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">π</span></span></span></span></span>. Det leder oss til følgende algoritme:</p><ol><li>Gjett et tilfeldig punkt mellom (-1, -1) og (1, 1)</li><li>Sjekk om punktet er innenfor eller utenfor sirkelen</li><li>Gjenta steg 1-2 tilstrekkelig mange ganger, og tell opp hvor ofte det tilfeldige tallet havnet inne i eller utenfor sirkelen. Da bli forholdet mellom antall treff i sirkel og totalt antall genererte punkter tilnærmet lik <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span></span>.</li><li>Gang opp <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span></span> med 4 for å finne en tilnærmet verdi for π.</li></ol><p>I <em>random_pi.py</em> skriv en funksjon <code>estimate_pi(n)</code>. La funksjonen beregne <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">π</span></span></span></span></span> ved å generere <code>n</code> tilfeldige koordinater mellom (-1, -1) og (1, 1) og telle opp hvor mange av dem som havnet innefor sirkelen og hvor mange som havnet utenfor.</p><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjon16ed2e10facf1fea" aria-expanded="false" aria-controls="hintseksjon16ed2e10facf1fea">
<i class="bi bi-lightbulb"></i> Hint</button><p></p><div class="collapse" id="hintseksjon16ed2e10facf1fea"><div class="card card-body"><p>For å finne et tilfeldig verdi mellom -1 og 1:</p><ul><li><code>random.random()</code> gir oss et tilfeldig flyttall mellom 0 og 1</li><li>gang tallet med 2 og trekk fra 1; da får vi et tilfeldig tall mellom -1 og 1.
For å finne ut om et punkt er inne i en sirkel, holder det å sjekke om avstanden mellom punktet og sirkelens sentrum er større enn sirkelens radius. Til dette kan vi bruke pytagoras. For å finne avstanden mellom to punkter (x_1, y_1) og (x_2, y_2) bruker vi formelen:</li></ul><p><span><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>d</mi><mo>=</mo><msqrt><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mn>2</mn></msub><mo>−</mo><msub><mi>x</mi><mn>1</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><msub><mi>y</mi><mn>2</mn></msub><mo>−</mo><msub><mi>y</mi><mn>1</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex"> d = \sqrt{(x_2 - x_1)^2 + (y_2 - y_1)^2} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.24em; vertical-align: -0.2561em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.9839em;"><span class="svg-align" style="top: -3.2em;"><span class="pstrut" style="height: 3.2em;"></span><span class="mord" style="padding-left: 1em;"><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.7401em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.7401em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span class="" style="top: -2.9439em;"><span class="pstrut" style="height: 3.2em;"></span><span class="hide-tail" style="min-width: 1.02em; height: 1.28em;"><svg width="400em" height="1.28em" viewBox="0 0 400000 1296" preserveAspectRatio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l0 -0
c4.7,-7.3,11,-11,19,-11
H40000v40H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M1001 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2561em;"><span class=""></span></span></span></span></span></span></span></span></span></span></p></div></div><p></p></div><div class="level-container E"><h5 id="terningkast">Terningkast</h5><div style="display:grid;gap:5px;grid-auto-flow:column;justify-content:right;direction:rtl"><div class="level-top"><span>Valgfri</span></div><div class="level-top"><span>Nivå E</span></div></div><div style="margin-bottom:25px"></div><p>I filen, <em>dice_throw.py</em> skal du skrive to funksjoner:</p><ol><li><p>Skriv en funksjon <code>throw_n_2(n)</code> som har som parameter et heltall <code>n</code> og simulerer <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> kast av to terninger (bruk modulen <code>random</code> fra python sitt standardbibliotek) og legger til summen av de to i en liste. Returner den listen (som nå inneholder <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span> elementer med tall mellom 2 og 12).</p></li><li><p>Skriv så en funksjon <code>print_histo(throws)</code> som tar inn en slik liste <code>throws</code> og printer ut et enkelt histogram hvor ‘*’ står for 1% (runde av til nærmeste heltall når prosentandelen av et utfall er et blandet tall). Bruk et oppslagsverk til å telle forekomster av hvert tall.
Et kall til <code>print_histo(throw_n_2(100))</code> skal for eksempel se noenlunde slik ut (Pass på formateringen av tallene og mellomrom; bruk tab, “\t”, mellom tallene og stjernene):</p></li></ol><div class="highlight" copybuttononly="true"><pre tabindex="0" style=";margin-bottom:0.4em;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="display:flex"><span><span style="color:#666">2</span> 	<span style="color:#666">***</span>
</span></span><span style="display:flex"><span><span style="color:#666">3</span> 	<span style="color:#666">****</span>
</span></span><span style="display:flex"><span><span style="color:#666">4</span> 	<span style="color:#666">******</span>
</span></span><span style="display:flex"><span><span style="color:#666">5</span> 	<span style="color:#666">*****</span>
</span></span><span style="display:flex"><span><span style="color:#666">6</span> 	<span style="color:#666">***************</span>
</span></span><span style="display:flex"><span><span style="color:#666">7</span> 	<span style="color:#666">**********************</span>
</span></span><span style="display:flex"><span><span style="color:#666">8</span> 	<span style="color:#666">********************</span>
</span></span><span style="display:flex"><span><span style="color:#666">9</span> 	<span style="color:#666">*************</span>
</span></span><span style="display:flex"><span><span style="color:#666">10</span> 	<span style="color:#666">********</span>
</span></span><span style="display:flex"><span><span style="color:#666">11</span> 	<span style="color:#666">**</span>
</span></span><span style="display:flex"><span><span style="color:#666">12</span> 	<span style="color:#666">**</span>
</span></span></code></pre>
        <div style="text-align:right;margin-bottom:.8em">
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="onCopyClicked(this)">
                <i class="bi bi-files"></i> Kopier
            </button>
        </div></div><blockquote><p>Ikke bruk random.seed() i denne oppgaven slik at autotestene kan fungere rett.</p></blockquote></div><div class="level-container C"><h5 id="kvittering">Kvittering</h5><div style="display:grid;gap:5px;grid-auto-flow:column;justify-content:right;direction:rtl"><div class="level-top"><span>Valgfri</span></div><div class="level-top"><span>Nivå C</span></div></div><div style="margin-bottom:25px"></div><p>I filen <em>receipt.py</em> skal du bruke modulen <a href="https://docs.python.org/3/library/decimal.html">decimal</a>. til å skrive et program som produserer en kvittering fra en butikk.</p><blockquote><p>Koden din vil sannsynligvis ikke fungere hvis du ikke bruker <strong>decimal</strong>-modulen for å lagre tall, siden avrundingsfeil er veldig viktig å unngå, samtidig som vi skal bruke desimal-tall.</p></blockquote><p>Ta utgangspunt i koden nedenfor:</p><div class="highlight" copybuttononly="true"><pre tabindex="0" style=";margin-bottom:0.4em;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="display:flex"><span><span style="color:green;font-weight:700">def</span> <span style="color:#00f">receipt_content</span>(prices_filename, cash_register_filename):
</span></span><span style="display:flex"><span>    <span style="color:#ba2121">"""Construct contents of a receipt of the cash register events,
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">    given the store prices."""</span>
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span>    <span style="color:#408080;font-style:italic"># din kode her</span>
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span><span style="color:green;font-weight:700">def</span> <span style="color:#00f">receipt</span>(prices_filename, cash_register_filename):
</span></span><span style="display:flex"><span>    <span style="color:#ba2121">"""Construct a receipt of the cash register events,
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">    given the store prices."""</span>
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span>    <span style="color:#408080;font-style:italic"># get receipt content from receipt_content()</span>
</span></span><span style="display:flex"><span>    purchases_returns, total, vat, payment, change <span style="color:#666">=</span> receipt_content(
</span></span><span style="display:flex"><span>        prices_filename, cash_register_filename
</span></span><span style="display:flex"><span>    )
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span>    <span style="color:#408080;font-style:italic"># the formatted lines of the receipt</span>
</span></span><span style="display:flex"><span>    receipt_lines <span style="color:#666">=</span> [<span style="color:#ba2121">f</span><span style="color:#ba2121">"</span><span style="color:#b68;font-weight:700">{</span><span style="color:#ba2121">'Nr.'</span><span style="color:#b68;font-weight:700">:</span><span style="color:#ba2121">&gt;4</span><span style="color:#b68;font-weight:700">}</span><span style="color:#ba2121">  </span><span style="color:#b68;font-weight:700">{</span><span style="color:#ba2121">'Item'</span><span style="color:#b68;font-weight:700">:</span><span style="color:#ba2121">18</span><span style="color:#b68;font-weight:700">}</span><span style="color:#ba2121">  </span><span style="color:#b68;font-weight:700">{</span><span style="color:#ba2121">'Price'</span><span style="color:#b68;font-weight:700">:</span><span style="color:#ba2121">&gt;10</span><span style="color:#b68;font-weight:700">}</span><span style="color:#ba2121">"</span>]
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span>    <span style="color:green;font-weight:700">for</span> nr, item, price <span style="color:#a2f;font-weight:700">in</span> purchases_returns:
</span></span><span style="display:flex"><span>        receipt_lines<span style="color:#666">.</span>append(<span style="color:#ba2121">f</span><span style="color:#ba2121">"</span><span style="color:#b68;font-weight:700">{</span>nr<span style="color:#b68;font-weight:700">:</span><span style="color:#ba2121">4d</span><span style="color:#b68;font-weight:700">}</span><span style="color:#ba2121">  </span><span style="color:#b68;font-weight:700">{</span>item<span style="color:#b68;font-weight:700">:</span><span style="color:#ba2121">18</span><span style="color:#b68;font-weight:700">}</span><span style="color:#ba2121">  </span><span style="color:#b68;font-weight:700">{</span>price<span style="color:#b68;font-weight:700">:</span><span style="color:#ba2121">10.2f</span><span style="color:#b68;font-weight:700">}</span><span style="color:#ba2121">"</span>)
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span>    receipt_lines<span style="color:#666">.</span>append(<span style="color:#ba2121">f</span><span style="color:#ba2121">"Total: </span><span style="color:#b68;font-weight:700">{</span>total<span style="color:#b68;font-weight:700">}</span><span style="color:#ba2121">"</span>)
</span></span><span style="display:flex"><span>    receipt_lines<span style="color:#666">.</span>append(<span style="color:#ba2121">f</span><span style="color:#ba2121">"Of which VAT: </span><span style="color:#b68;font-weight:700">{</span>vat<span style="color:#b68;font-weight:700">:</span><span style="color:#ba2121">.2f</span><span style="color:#b68;font-weight:700">}</span><span style="color:#ba2121">"</span>)
</span></span><span style="display:flex"><span>    receipt_lines<span style="color:#666">.</span>append(<span style="color:#ba2121">f</span><span style="color:#ba2121">"Payment: </span><span style="color:#b68;font-weight:700">{</span>payment<span style="color:#b68;font-weight:700">}</span><span style="color:#ba2121">"</span>)
</span></span><span style="display:flex"><span>    receipt_lines<span style="color:#666">.</span>append(<span style="color:#ba2121">f</span><span style="color:#ba2121">"Change </span><span style="color:#b68;font-weight:700">{</span>change<span style="color:#b68;font-weight:700">}</span><span style="color:#ba2121">"</span>)
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span>    <span style="color:#408080;font-style:italic"># add some dividers</span>
</span></span><span style="display:flex"><span>    max_len <span style="color:#666">=</span> <span style="color:green">max</span>(<span style="color:green">len</span>(line) <span style="color:green;font-weight:700">for</span> line <span style="color:#a2f;font-weight:700">in</span> receipt_lines)
</span></span><span style="display:flex"><span>    divider <span style="color:#666">=</span> <span style="color:#ba2121">"-"</span> <span style="color:#666">*</span> max_len
</span></span><span style="display:flex"><span>    receipt_lines<span style="color:#666">.</span>insert(<span style="color:#666">1</span>, divider)
</span></span><span style="display:flex"><span>    receipt_lines<span style="color:#666">.</span>insert(<span style="color:#666">-</span><span style="color:#666">4</span>, divider)
</span></span><span style="display:flex"><span>    receipt_lines<span style="color:#666">.</span>insert(<span style="color:#666">-</span><span style="color:#666">2</span>, divider)
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span>    <span style="color:green;font-weight:700">return</span> <span style="color:#ba2121">"</span><span style="color:#b62;font-weight:700">\n</span><span style="color:#ba2121">"</span><span style="color:#666">.</span>join(receipt_lines)
</span></span></code></pre>
        <div style="text-align:right;margin-bottom:.8em">
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="onCopyClicked(this)">
                <i class="bi bi-files"></i> Kopier
            </button>
        </div></div><p>Du skal skrive koden til funksjonen <code>receipt_content()</code> som beregner inneholdet i kvitteringen utifra en fil med butikkens priser og en fil med hendelsene ved kassen. Argumentet <code>prices_filename</code> er en streng med navnet til filen som inneholder prisene. Argumentet <code>cash_register_filename</code> er en streng med navnet til filen som inneholder hendelsene ved kassen.</p><p>Funksjonen <code>receipt_content()</code> skal returnere en tupel som inneholder følgende (i denne rekkefølgen):</p><ol><li>En liste med tupler som inneholder (i følgende rekkefølge) antall, produkt og total pris, først for alle ting som har blitt kjøpt, i alfabetisk orden, og så for alle ting som har blitt returnert, i alfabetisk orden (se eksempelkvittering nedenfor). For de returnerte produktene blir det negative tall.</li><li>Den totale prisen.</li><li>Hvor mye av den totale prisen som er mva.</li><li>Hvor mye som har blitt betalt.</li><li>Hvor mye som blir betalt tilbake (her blir det ikke-positive tall).</li></ol><p>Filen med butikkens priser er formattert slik som eksempelfilen <a href="https://inf100.ii.uib.no/lab/7/kvittering/data/prices.txt" download="">prices.txt</a> (som du kan bruke til å teste programmet ditt). Først står produkt, så semikolon (<code>;</code>), og så prisen. Dette er egentlig en CSV-fil som bruker semikolon som skilletegn.</p><p>Filen med hendelsene ved kassen er formattert slik som eksempelfilen <a href="https://inf100.ii.uib.no/lab/7/kvittering/data/cash_register.txt" download="">cash_register.txt</a> (som du kan bruke til å teste programmet ditt). Først står hva som skjer (kjøp, retur eller betaling), så semikolon (;), og så produkten/verdien. Dette er også egentlig en CSV-fil som bruker semikolon som skilletegn.</p><p>Funksjonen <code>receipt()</code> skal du ikke endre. Den bruker <code>receipt_content()</code> til å beregne inneholdet i kvitteringen og så produserer <code>receipt()</code> en pen kvittering utifra det innholdet. Du skal bare skrive kode til <code>receipt_content()</code>.</p><p>Om din kode til <code>receipt_content()</code> er riktig så skal denne testen passere:</p><div class="highlight" copybuttononly="true"><pre tabindex="0" style=";margin-bottom:0.4em;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="display:flex"><span><span style="color:green">print</span>(<span style="color:#ba2121">"Tester receipt... "</span>, end<span style="color:#666">=</span><span style="color:#ba2121">""</span>)
</span></span><span style="display:flex"><span>expected_value <span style="color:#666">=</span> <span style="color:#ba2121">"""</span><span style="color:#b62;font-weight:700">\
</span></span></span><span style="display:flex"><span><span style="color:#b62;font-weight:700"></span><span style="color:#ba2121"> Nr.  Item                     Price
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">------------------------------------
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">   2  apple                    10.00
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">   1  chips                    24.30
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">   1  dish soap                26.20
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">   1  frozen pizza             54.40
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">   1  peanuts                  18.50
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">   1  toilet paper             34.00
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">   3  tomato                   30.00
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">  -1  pocket book            -149.00
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">  -1  toothpaste              -13.70
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">------------------------------------
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">Total: 34.70
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">Of which VAT: 6.94
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">------------------------------------
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">Payment: 100.00
</span></span></span><span style="display:flex"><span><span style="color:#ba2121">Change -65.30"""</span>
</span></span><span style="display:flex"><span><span style="color:green;font-weight:700">assert</span>(expected_value <span style="color:#666">==</span> receipt(<span style="color:#ba2121">"prices.txt"</span>, <span style="color:#ba2121">"cash_register.txt"</span>))
</span></span><span style="display:flex"><span><span style="color:green">print</span>(<span style="color:#ba2121">"OK"</span>)
</span></span></code></pre>
        <div style="text-align:right;margin-bottom:.8em">
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="onCopyClicked(this)">
                <i class="bi bi-files"></i> Kopier
            </button>
        </div></div><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjon118151eec322d692" aria-expanded="false" aria-controls="hintseksjon118151eec322d692">
<i class="bi bi-lightbulb"></i> Hint</button><p></p><div class="collapse" id="hintseksjon118151eec322d692"><div class="card card-body"><ul><li><p>Du må bruke biblioteket <a href="https://docs.python.org/3/library/decimal.html">decimal</a> for at beregningene skal bli riktige (prøv hvordan kvitteringen blir om du bruker float).</p></li><li><p>Decimal aksepterer både float og string for å lage decimals. Prøv hvordan kvitteringen blir om du gir decimals en float. Hvorfor skjer dette?</p></li><li><p>Det er mulig at betaling skjer flere ganger underveis ved kassen.</p></li><li><p>Du kan anta at alle betalinger ved kassen har positiv verdi.</p></li><li><p>Du kan anta at det ikke er noen feil i filene som inneholder prisene og hendelsene ved kassen.</p></li><li><p>Det er mulig at den totale prisen blir negativt (om kunden for eksempel bare returnerer ting).</p></li><li><p>Gitt en pris inklusive mva så multipliserer du prisen med 0.2 for å finne ut hvor mye av prisen som er mva.</p></li><li><p>Det kan være lurt å bruke dictionaries til prislisten og det som blitt kjøpt og det som blitt returnert.</p></li><li><p>Du må ikke skrive all kode innen funksjonen <code>receipt_content()</code>. Du kan dele opp koden i flere funksjoner på en måte du synes føles naturlig.</p></li></ul></div></div><p></p></div><div class="level-container A"><h5 id="vrmelding">Værmelding</h5><div style="display:grid;gap:5px;grid-auto-flow:column;justify-content:right;direction:rtl"><div class="level-top"><span>Valgfri</span></div><div class="level-top"><span>Nivå A</span></div></div><div style="margin-bottom:25px"></div><p>I filen <em>forecast.py</em> skriv en funksjon <code>weather_in_bergen_next_hour()</code> uten parametre som returnerer en streng som sammenfatter været i Bergen den neste timen. Funksjonen skal hente vær-data fra meterologisk instutt, og bruke informasjon fra feltet «symbol_code» om den nærmeste timen.</p><p>Eksempelkjøring:
<code>print("Været i Bergen neste time:", weather_in_bergen_next_hour())</code></p><div class="highlight"><pre tabindex="0" style="-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text"><span style="display:flex"><span>Været i Bergen neste time: cloudy
</span></span></code></pre></div><p>For å løse denne oppgaven, skal vi</p><ol><li>Finne ut hvilken url vi kan bruke for å få informasjon om været fra meterologisk institutt</li><li>Bruke <a href="https://requests.readthedocs.io/en/latest/">requests</a> -pakken for å laste ned informasjonen fra meterlogisk institutt inn i python-programmet</li><li>Bruke <a href="https://docs.python.org/3/library/json.html">json</a> -pakken for å konvertere den nedlastede informasjonen til et oppslagsverk, og til slutt</li><li>Slå opp på riktig sted i oppslagsverket og returnere denne informasjonen.</li></ol><p><strong>Steg A: nettadresse fra meterologisk institutt</strong></p><p>Meterologisk instutt tilbyr massevis av vær-informasjon gratis (under lisensen CC-BY 4.0) fra sine nettsider. Slå opp på nettsiden <a href="https://api.met.no/weatherapi/locationforecast/2.0/">https://api.met.no/weatherapi/locationforecast/2.0/</a> og finn <strong>OPENAPI UI</strong> fannen (Øverst i siden ved siden av <strong>DOCUMENTATION</strong>). Les om <em><strong>GET /compact</strong></em> under <em>data</em>.</p><ul><li>Du vil under «parameters» se to felter <em>lat</em> og <em>lon</em> hvor du kan fylle ut henholdsvis breddegrad og lengdegrad for hvilken posisjon du ønsker.</li></ul><button class="btn btn-outline-primary btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hintseksjon48b9bfe7cc25a60c" aria-expanded="false" aria-controls="hintseksjon48b9bfe7cc25a60c">
<i class="bi bi-info-circle"></i> Finn breddegrad og lengdegrad</button><p></p><div class="collapse" id="hintseksjon48b9bfe7cc25a60c"><div class="card card-body"><p>For å finne breddegrad og lengdegrad for et gitt sted, kan du på til <a href="https://maps.google.com/">https://maps.google.com</a> og trykke på kartet. Da vil koordinatene til det gitte stedet vises.</p><p><span></span></p><div class="cimg-container"><img src="./Lab7 _ INF100 v24_files/find_lat_long.gif" alt="Klikke på kartet på Google Maps" class="cimg"></div><p></p></div></div><p></p><ul><li>Når du har fylt ut breddegrad og lengdegrad, trykk på «Try it out!»</li><li>Kopier med deg internettadressen under «Request URL». Dette er adressen til siden vi skal laste ned i programmet vårt (prøv den direkte i nettleseren også og se hva du får).</li><li>Undersøk innholdet under «Response Body». Dette er den strengen vi får når vi laster ned innholdet fra den overnevnte nettadressen. Hvor ligger informasjonen vi er ute etter? Husk, vi ser etter verdier knyttet til nøkkelen «symbol_code».</li></ul><p><strong>Steg B: bruk requests for å laste ned informasjon</strong></p><p>Bruk nettadressen vi fant i forrige steg som url. Merk at vilkårene til Meterologisk institutt sier at vi må identifisere hvem vi er i <code>User-Agent</code> -feltet i «header». Det er tilstrekkelig å bruke <code>"inf100.ii.uib.no &lt;ditt uib-brukernavn&gt;"</code> som verdi for dette feltet.</p><p><strong>Steg C: bruk JSON for å konvertere til oppslagsverk</strong></p><p>Du kan bruke <code>json.loads()</code> for å konvertere en streng til et oppslagsverk. Her er et eksempel på hvordan du kan gjøre det:</p><div class="highlight"><pre tabindex="0" style=";margin-bottom:0.4em;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="display:flex"><span><span style="color:green;font-weight:700">import</span> <span style="color:#00f;font-weight:700">json</span>
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span>s <span style="color:#666">=</span> <span style="color:#ba2121">'{"a": 1, "b": 2}'</span>
</span></span><span style="display:flex"><span>d <span style="color:#666">=</span> json<span style="color:#666">.</span>loads(s)
</span></span><span style="display:flex"><span><span style="color:green">print</span>(d[<span style="color:#ba2121">"a"</span>]) <span style="color:#408080;font-style:italic"># 1</span>
</span></span></code></pre>
        <div style="text-align:right;margin-bottom:.8em">
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="onCopyClicked(this)">
                <i class="bi bi-files"></i> Kopier
            </button>
            <button type="button" class="btn btn-outline-primary btn-sm" onclick="onTraceClicked(this)">
                <i class="bi bi-eye"></i> Se steg
            </button>
            <button type="button" class="runbutton btn btn-outline-primary btn-sm" onclick="onRunClicked(this)" disabled="">
                <i class="bi bi-play-circle"></i> Kjør
            </button>
        </div></div><p>Her blir d et oppslagsverk med nøklene “a” og “b” og verdiene 1 og 2.</p><p><strong>Steg D: returner verdien knyttet til nøkkelen «symbol code» i oppslagsverket</strong></p><p>Det gjelder å holde tungen rett i munnen når du skal slå opp i oppslagsverket. En strategi kan være å begynne med å returnere <code>d["properties"]</code> og så spesifisere videre ved å returnere <code>d["properties"]["timeseries"]</code> og så videre, helt til riktig verdi blir returnert.</p><p>Det er ikke nødvendig å finne nøyaktig riktig time for å få oppgaven godkjent, det holder å returnere den første timen du får informasjon om (selv om den var i fortiden)</p><p><strong>Steg E (frivillig): finn nøyaktig riktig time å rapportere for</strong></p><p>For å rapportere for nøyaktig riktig time, må du matche den timen du får fra meterologisk instiutt med tiden akkurat nå. Les deg opp på datetime -modulen og se om du kan bruke informasjonen fra meterologisk institutt for å finne den nærmeste timen å rapportere fra.</p><p><strong>Steg F (frivillig): mer omfattende værmelding</strong></p><p>Kan du finne mer informasjon å rapportere? Nedbørsmengder? Vind? Sannsynlighet for nedbør (nå må du over på <em><strong>GET /complete</strong></em> hos meterologisk institutt)?</p></div></main></div><footer id="footer" class="mt-auto text-center"><div class="container"><span class="navbar-brand">Universitetet i Bergen
<a href="https://www.uib.no/"><img src="./Lab7 _ INF100 v24_files/logo-uib.svg" style="max-height:2em;margin:.2em" alt="Universitetet i Bergen"></a></span>
<span><a href="https://inf100.ii.uib.no/om/">Om siden</a>.</span></div></footer><script src="./Lab7 _ INF100 v24_files/feather.min.js.last ned"></script>
<script>feather.replace()</script><script src="./Lab7 _ INF100 v24_files/jquery-3.6.0.min.js.last ned"></script>
<script src="./Lab7 _ INF100 v24_files/bootstrap.bundle.min.js.last ned"></script>
<script id="videotagscript" src="./Lab7 _ INF100 v24_files/uib-videotag.js.last ned"></script>
<script src="./Lab7 _ INF100 v24_files/ace-1.7.1.js.last ned"></script>
<script src="./Lab7 _ INF100 v24_files/brython.js.last ned"></script>
<script src="./Lab7 _ INF100 v24_files/brython_stdlib.js.last ned"></script>
<script id="pyeditscript" src="./Lab7 _ INF100 v24_files/uib-pyedit.js.last ned"></script>
<link rel="stylesheet" href="./Lab7 _ INF100 v24_files/katex.min.css" integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC" crossorigin="anonymous"><script defer="" src="./Lab7 _ INF100 v24_files/katex.min.js.last ned" integrity="sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja" crossorigin="anonymous"></script>
<script defer="" src="./Lab7 _ INF100 v24_files/auto-render.min.js.last ned" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous" onload="renderMathInElement(document.body)"></script></div>
<!-- begin playVideoPopup -->
<div class="modal fade" id="playVideoPopup" tabindex="-1" aria-labelledby="videoModalLabel" aria-hidden="true">
  <div class="modal-dialog" style="max-width:92%">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div id="videoPlayerDiv"></div>
      </div>
    </div>
  </div>
</div>
<!-- end playVideoPopup -->
</body></html>